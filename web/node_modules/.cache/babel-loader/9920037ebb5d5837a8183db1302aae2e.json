{"remainingRequest":"D:\\demo\\vuesax-admin-v3.2\\node_modules\\thread-loader\\dist\\cjs.js!D:\\demo\\vuesax-admin-v3.2\\node_modules\\@vue\\cli-plugin-babel\\node_modules\\babel-loader\\lib\\index.js!D:\\demo\\vuesax-admin-v3.2\\node_modules\\eslint-loader\\index.js??ref--13-0!D:\\demo\\vuesax-admin-v3.2\\src\\service\\service.js","dependencies":[{"path":"D:\\demo\\vuesax-admin-v3.2\\src\\service\\service.js","mtime":1567515883418},{"path":"D:\\demo\\vuesax-admin-v3.2\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\demo\\vuesax-admin-v3.2\\node_modules\\thread-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\demo\\vuesax-admin-v3.2\\node_modules\\@vue\\cli-plugin-babel\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"D:\\demo\\vuesax-admin-v3.2\\node_modules\\eslint-loader\\index.js","mtime":499162500000}],"contextDependencies":[],"result":["import \"core-js/modules/es6.regexp.to-string\";\nimport \"core-js/modules/es6.regexp.replace\";\nimport \"core-js/modules/es6.regexp.split\";\nimport \"core-js/modules/es6.promise\";\n// import Api from '@/service/api'\nimport axios from 'axios'; // import { read } from 'fs';\n// import Axios from 'axios';\n\nimport Vue from 'vue';\nimport moment from \"moment\";\nexport default {\n  url: \"http://localhost:3000/api/\",\n  getData: function getData(url) {\n    var _this = this;\n\n    return new Promise(function (resolve, reject) {\n      axios.create({\n        baseURL: _this.url,\n        withCredentials: false,\n        headers: {\n          'Accept': 'application/json',\n          'Content-Type': 'application/json',\n          'x-access-token': _this.getToken()\n        }\n      }).get(url).then(function (result) {\n        result = result.data;\n\n        if (result.code) {\n          // result=result.data;\n          Vue.swal(result.message, '', 'error').then(function (result) {\n            reject(result);\n          });\n        } else {\n          resolve(result.data);\n        }\n      }, function (err) {\n        reject(err);\n      });\n    });\n  },\n  postData: function postData(url, data) {\n    var _this2 = this;\n\n    return new Promise(function (resolve, reject) {\n      axios.create({\n        baseURL: _this2.url,\n        withCredentials: false,\n        headers: {\n          'Accept': 'application/json',\n          'Content-Type': 'application/json',\n          'x-access-token': _this2.getToken()\n        }\n      }).post(url, JSON.stringify(data)).then(function (result) {\n        result = result.data;\n\n        if (result.code) {\n          Vue.swal(result.message, '', 'error').then(function (result) {\n            reject(result);\n          });\n        } else {\n          resolve(result.data);\n        }\n      }, function (err) {\n        reject(err);\n      });\n    });\n  },\n  upload: function upload(url, formData) {\n    var _this3 = this;\n\n    return new Promise(function (resolve, reject) {\n      axios.post(_this3.url + url, formData, {\n        headers: {\n          'Content-Type': 'multipart/form-data'\n        }\n      }).then(function (result) {\n        result = result.data;\n\n        if (result.code) {\n          Vue.swal(result.message, '', 'error').then(function (result) {\n            reject(result);\n          });\n        } else {\n          resolve(result.data);\n        }\n      }, function (err) {\n        reject(err);\n      });\n    });\n  },\n  deleteData: function deleteData(url) {\n    var _this4 = this;\n\n    return new Promise(function (resolve, reject) {\n      axios.create({\n        baseURL: _this4.url,\n        withCredentials: false,\n        headers: {\n          'Accept': 'application/json',\n          'Content-Type': 'application/json',\n          'x-access-token': _this4.getToken()\n        }\n      }).delete(url).then(function (result) {\n        if (result.code) {\n          Vue.swal(result.message, '', 'error').then(function (result) {\n            result = result.data;\n            reject(result);\n          });\n        } else {\n          resolve(result.data);\n        }\n      }, function (err) {\n        reject(err);\n      });\n    });\n  },\n  prefix: \"xsdfjksldfjlsdfkjsldfkj\",\n  tokenText: \"getmytoken\",\n  setToken: function setToken(token) {\n    localStorage.setItem(this.tokenText, this.prefix + token);\n  },\n  isTokenExpire: function isTokenExpire() {\n    var token = this.getUser();\n    return !moment(token.exp).isAfter(moment());\n  },\n  getToken: function getToken() {\n    var token = localStorage.getItem(this.tokenText);\n\n    if (token) {\n      return token.substr(this.prefix.length);\n    } else {\n      return \"\";\n    }\n  },\n  removeToken: function removeToken() {\n    localStorage.removeItem(this.tokenText);\n  },\n  getUser: function getUser() {\n    return this.decodeToken(this.getToken()).user;\n  },\n  isLoggedIn: function isLoggedIn() {\n    return this.checkLogin(this.prefix + this.getToken());\n  },\n  checkLogin: function checkLogin(token) {\n    if (this.decodeToken(token.substr(this.prefix.length))) {\n      return true;\n    }\n\n    return false;\n  },\n  decodeToken: function decodeToken(token) {\n    try {\n      var base64Url = token.split('.')[1];\n      var base64 = base64Url.replace(/-/g, '+').replace(/_/g, '/');\n      var jsonPayload = decodeURIComponent(atob(base64).split('').map(function (c) {\n        return '%' + ('00' + c.charCodeAt(0).toString(16)).slice(-2);\n      }).join(''));\n      return JSON.parse(jsonPayload);\n    } catch (e) {\n      return \"\";\n    }\n  }\n};",{"version":3,"sources":["D:\\demo\\vuesax-admin-v3.2\\src\\service\\service.js"],"names":["axios","Vue","moment","url","getData","Promise","resolve","reject","create","baseURL","withCredentials","headers","getToken","get","then","result","data","code","swal","message","err","postData","post","JSON","stringify","upload","formData","deleteData","delete","prefix","tokenText","setToken","token","localStorage","setItem","isTokenExpire","getUser","exp","isAfter","getItem","substr","length","removeToken","removeItem","decodeToken","user","isLoggedIn","checkLogin","base64Url","split","base64","replace","jsonPayload","decodeURIComponent","atob","map","c","charCodeAt","toString","slice","join","parse","e"],"mappings":";;;;AAAA;AACA,OAAOA,KAAP,MAAkB,OAAlB,C,CACA;AACA;;AACA,OAAOC,GAAP,MAAgB,KAAhB;AACA,OAAOC,MAAP,MAAmB,QAAnB;AACA,eAAgB;AACdC,EAAAA,GAAG,8BADW;AAEdC,EAAAA,OAFc,mBAEND,GAFM,EAED;AAAA;;AACX,WAAO,IAAIE,OAAJ,CAAY,UAACC,OAAD,EAAUC,MAAV,EAAqB;AACtCP,MAAAA,KAAK,CAACQ,MAAN,CAAa;AACXC,QAAAA,OAAO,EAAE,KAAI,CAACN,GADH;AAEXO,QAAAA,eAAe,EAAE,KAFN;AAGXC,QAAAA,OAAO,EAAE;AACP,oBAAU,kBADH;AAEP,0BAAgB,kBAFT;AAGP,4BAAkB,KAAI,CAACC,QAAL;AAHX;AAHE,OAAb,EAQGC,GARH,CAQOV,GARP,EAQYW,IARZ,CAQiB,UAAAC,MAAM,EAAI;AACzBA,QAAAA,MAAM,GAACA,MAAM,CAACC,IAAd;;AACA,YAAGD,MAAM,CAACE,IAAV,EAAe;AACb;AACAhB,UAAAA,GAAG,CAACiB,IAAJ,CAASH,MAAM,CAACI,OAAhB,EAAwB,EAAxB,EAA2B,OAA3B,EAAoCL,IAApC,CAAyC,UAACC,MAAD,EAAU;AACjDR,YAAAA,MAAM,CAACQ,MAAD,CAAN;AACD,WAFD;AAGD,SALD,MAKK;AACHT,UAAAA,OAAO,CAACS,MAAM,CAACC,IAAR,CAAP;AACD;AAEF,OAnBD,EAmBG,UAAAI,GAAG,EAAI;AACRb,QAAAA,MAAM,CAACa,GAAD,CAAN;AACD,OArBD;AAsBD,KAvBM,CAAP;AAwBD,GA3Ba;AA4BdC,EAAAA,QA5Bc,oBA4BLlB,GA5BK,EA4BAa,IA5BA,EA4BM;AAAA;;AAClB,WAAO,IAAIX,OAAJ,CAAY,UAACC,OAAD,EAAUC,MAAV,EAAqB;AACtCP,MAAAA,KAAK,CAACQ,MAAN,CAAa;AACXC,QAAAA,OAAO,EAAE,MAAI,CAACN,GADH;AAEXO,QAAAA,eAAe,EAAE,KAFN;AAGXC,QAAAA,OAAO,EAAE;AACP,oBAAU,kBADH;AAEP,0BAAgB,kBAFT;AAGP,4BAAkB,MAAI,CAACC,QAAL;AAHX;AAHE,OAAb,EAQGU,IARH,CAQQnB,GARR,EAQaoB,IAAI,CAACC,SAAL,CAAeR,IAAf,CARb,EAQmCF,IARnC,CAQwC,UAAAC,MAAM,EAAI;AAChDA,QAAAA,MAAM,GAACA,MAAM,CAACC,IAAd;;AACA,YAAGD,MAAM,CAACE,IAAV,EAAe;AACbhB,UAAAA,GAAG,CAACiB,IAAJ,CAASH,MAAM,CAACI,OAAhB,EAAwB,EAAxB,EAA2B,OAA3B,EAAoCL,IAApC,CAAyC,UAACC,MAAD,EAAU;AACjDR,YAAAA,MAAM,CAACQ,MAAD,CAAN;AACD,WAFD;AAGD,SAJD,MAIK;AACHT,UAAAA,OAAO,CAACS,MAAM,CAACC,IAAR,CAAP;AACD;AAEF,OAlBD,EAkBG,UAAAI,GAAG,EAAI;AACRb,QAAAA,MAAM,CAACa,GAAD,CAAN;AACD,OApBD;AAqBD,KAtBM,CAAP;AAwBD,GArDa;AAsDdK,EAAAA,MAtDc,kBAsDPtB,GAtDO,EAsDHuB,QAtDG,EAsDM;AAAA;;AAClB,WAAO,IAAIrB,OAAJ,CAAY,UAACC,OAAD,EAASC,MAAT,EAAkB;AACnCP,MAAAA,KAAK,CAACsB,IAAN,CAAY,MAAI,CAACnB,GAAL,GAASA,GAArB,EACEuB,QADF,EAEE;AACEf,QAAAA,OAAO,EAAE;AACL,0BAAgB;AADX;AADX,OAFF,EAOEG,IAPF,CAOO,UAACC,MAAD,EAAU;AACfA,QAAAA,MAAM,GAACA,MAAM,CAACC,IAAd;;AACA,YAAGD,MAAM,CAACE,IAAV,EAAe;AACbhB,UAAAA,GAAG,CAACiB,IAAJ,CAASH,MAAM,CAACI,OAAhB,EAAwB,EAAxB,EAA2B,OAA3B,EAAoCL,IAApC,CAAyC,UAACC,MAAD,EAAU;AACjDR,YAAAA,MAAM,CAACQ,MAAD,CAAN;AACD,WAFD;AAGD,SAJD,MAIK;AACHT,UAAAA,OAAO,CAACS,MAAM,CAACC,IAAR,CAAP;AACD;AACF,OAhBD,EAgBE,UAAAI,GAAG,EAAE;AACLb,QAAAA,MAAM,CAACa,GAAD,CAAN;AACD,OAlBD;AAoBD,KArBM,CAAP;AAsBD,GA7Ea;AA8EdO,EAAAA,UA9Ec,sBA8EHxB,GA9EG,EA8EE;AAAA;;AACd,WAAO,IAAIE,OAAJ,CAAY,UAACC,OAAD,EAAUC,MAAV,EAAqB;AACtCP,MAAAA,KAAK,CAACQ,MAAN,CAAa;AACXC,QAAAA,OAAO,EAAE,MAAI,CAACN,GADH;AAEXO,QAAAA,eAAe,EAAE,KAFN;AAGXC,QAAAA,OAAO,EAAE;AACP,oBAAU,kBADH;AAEP,0BAAgB,kBAFT;AAGP,4BAAkB,MAAI,CAACC,QAAL;AAHX;AAHE,OAAb,EAQGgB,MARH,CAQUzB,GARV,EAQeW,IARf,CAQoB,UAAAC,MAAM,EAAI;AAC5B,YAAGA,MAAM,CAACE,IAAV,EAAe;AACbhB,UAAAA,GAAG,CAACiB,IAAJ,CAASH,MAAM,CAACI,OAAhB,EAAwB,EAAxB,EAA2B,OAA3B,EAAoCL,IAApC,CAAyC,UAACC,MAAD,EAAU;AACjDA,YAAAA,MAAM,GAACA,MAAM,CAACC,IAAd;AACAT,YAAAA,MAAM,CAACQ,MAAD,CAAN;AACD,WAHD;AAID,SALD,MAKK;AACHT,UAAAA,OAAO,CAACS,MAAM,CAACC,IAAR,CAAP;AACD;AAEF,OAlBD,EAkBG,UAAAI,GAAG,EAAI;AACRb,QAAAA,MAAM,CAACa,GAAD,CAAN;AACD,OApBD;AAqBD,KAtBM,CAAP;AAuBD,GAtGa;AAwGdS,EAAAA,MAAM,EAAE,yBAxGM;AAyGdC,EAAAA,SAAS,EAAE,YAzGG;AA0GdC,EAAAA,QA1Gc,oBA0GLC,KA1GK,EA0GE;AACdC,IAAAA,YAAY,CAACC,OAAb,CAAqB,KAAKJ,SAA1B,EAAqC,KAAKD,MAAL,GAAcG,KAAnD;AACD,GA5Ga;AA6GdG,EAAAA,aA7Gc,2BA6GE;AACd,QAAIH,KAAK,GAAG,KAAKI,OAAL,EAAZ;AACA,WAAO,CAAElC,MAAM,CAAC8B,KAAK,CAACK,GAAP,CAAN,CAAkBC,OAAlB,CAA0BpC,MAAM,EAAhC,CAAT;AACD,GAhHa;AAiHdU,EAAAA,QAjHc,sBAiHH;AACT,QAAIoB,KAAK,GAAGC,YAAY,CAACM,OAAb,CAAqB,KAAKT,SAA1B,CAAZ;;AACA,QAAIE,KAAJ,EAAW;AACT,aAAOA,KAAK,CAACQ,MAAN,CAAa,KAAKX,MAAL,CAAYY,MAAzB,CAAP;AACD,KAFD,MAEO;AACL,aAAO,EAAP;AACD;AAEF,GAzHa;AA0HdC,EAAAA,WA1Hc,yBA0HD;AACXT,IAAAA,YAAY,CAACU,UAAb,CAAwB,KAAKb,SAA7B;AACD,GA5Ha;AA6HdM,EAAAA,OA7Hc,qBA6HJ;AACR,WAAO,KAAKQ,WAAL,CAAiB,KAAKhC,QAAL,EAAjB,EAAkCiC,IAAzC;AACD,GA/Ha;AAgIdC,EAAAA,UAhIc,wBAgID;AACX,WAAQ,KAAKC,UAAL,CAAgB,KAAKlB,MAAL,GAAc,KAAKjB,QAAL,EAA9B,CAAR;AACD,GAlIa;AAmIdmC,EAAAA,UAnIc,sBAmIHf,KAnIG,EAmII;AAChB,QAAI,KAAKY,WAAL,CAAiBZ,KAAK,CAACQ,MAAN,CAAa,KAAKX,MAAL,CAAYY,MAAzB,CAAjB,CAAJ,EAAwD;AACtD,aAAO,IAAP;AACD;;AACD,WAAO,KAAP;AACD,GAxIa;AA0IdG,EAAAA,WA1Ic,uBA0IFZ,KA1IE,EA0IK;AACjB,QAAI;AACF,UAAIgB,SAAS,GAAGhB,KAAK,CAACiB,KAAN,CAAY,GAAZ,EAAiB,CAAjB,CAAhB;AACA,UAAIC,MAAM,GAAGF,SAAS,CAACG,OAAV,CAAkB,IAAlB,EAAwB,GAAxB,EAA6BA,OAA7B,CAAqC,IAArC,EAA2C,GAA3C,CAAb;AACA,UAAIC,WAAW,GAAGC,kBAAkB,CAACC,IAAI,CAACJ,MAAD,CAAJ,CAAaD,KAAb,CAAmB,EAAnB,EAAuBM,GAAvB,CAA2B,UAAUC,CAAV,EAAa;AAC3E,eAAO,MAAM,CAAC,OAAOA,CAAC,CAACC,UAAF,CAAa,CAAb,EAAgBC,QAAhB,CAAyB,EAAzB,CAAR,EAAsCC,KAAtC,CAA4C,CAAC,CAA7C,CAAb;AACD,OAFoC,EAElCC,IAFkC,CAE7B,EAF6B,CAAD,CAApC;AAIA,aAAOrC,IAAI,CAACsC,KAAL,CAAWT,WAAX,CAAP;AACD,KARD,CAQE,OAAOU,CAAP,EAAU;AACV,aAAO,EAAP;AACD;AACF;AAtJa,CAAhB","sourcesContent":["// import Api from '@/service/api'\r\nimport axios from 'axios'\r\n// import { read } from 'fs';\r\n// import Axios from 'axios';\r\nimport Vue from 'vue';\r\nimport moment from \"moment\";\r\nexport default  {\r\n  url:`http://localhost:3000/api/`,\r\n  getData(url) {\r\n    return new Promise((resolve, reject) => {\r\n      axios.create({\r\n        baseURL: this.url,\r\n        withCredentials: false,\r\n        headers: {\r\n          'Accept': 'application/json',\r\n          'Content-Type': 'application/json',\r\n          'x-access-token': this.getToken()\r\n        }\r\n      }).get(url).then(result => {\r\n        result=result.data;\r\n        if(result.code){\r\n          // result=result.data;\r\n          Vue.swal(result.message,'','error').then((result)=>{\r\n            reject(result);\r\n          });\r\n        }else{\r\n          resolve(result.data);\r\n        }\r\n\r\n      }, err => {\r\n        reject(err);\r\n      });\r\n    })\r\n  },\r\n  postData(url, data) {\r\n    return new Promise((resolve, reject) => {\r\n      axios.create({\r\n        baseURL: this.url,\r\n        withCredentials: false,\r\n        headers: {\r\n          'Accept': 'application/json',\r\n          'Content-Type': 'application/json',\r\n          'x-access-token': this.getToken()\r\n        }\r\n      }).post(url, JSON.stringify(data)).then(result => {\r\n        result=result.data;\r\n        if(result.code){\r\n          Vue.swal(result.message,'','error').then((result)=>{\r\n            reject(result);\r\n          });\r\n        }else{\r\n          resolve(result.data);\r\n        }\r\n\r\n      }, err => {\r\n        reject(err);\r\n      });\r\n    })\r\n\r\n  },\r\n  upload(url,formData){\r\n    return new Promise((resolve,reject)=>{\r\n      axios.post( this.url+url,\r\n        formData,\r\n        {\r\n          headers: {\r\n              'Content-Type': 'multipart/form-data'\r\n          }\r\n        }\r\n      ).then((result)=>{\r\n        result=result.data;\r\n        if(result.code){\r\n          Vue.swal(result.message,'','error').then((result)=>{\r\n            reject(result);\r\n          });\r\n        }else{\r\n          resolve(result.data);\r\n        }\r\n      },err=>{\r\n        reject(err)\r\n      })\r\n\r\n    })\r\n  },\r\n  deleteData(url) {\r\n    return new Promise((resolve, reject) => {\r\n      axios.create({\r\n        baseURL: this.url,\r\n        withCredentials: false,\r\n        headers: {\r\n          'Accept': 'application/json',\r\n          'Content-Type': 'application/json',\r\n          'x-access-token': this.getToken()\r\n        }\r\n      }).delete(url).then(result => {\r\n        if(result.code){\r\n          Vue.swal(result.message,'','error').then((result)=>{\r\n            result=result.data;\r\n            reject(result);\r\n          });\r\n        }else{\r\n          resolve(result.data);\r\n        }\r\n\r\n      }, err => {\r\n        reject(err);\r\n      });\r\n    })\r\n  },\r\n\r\n  prefix: \"xsdfjksldfjlsdfkjsldfkj\",\r\n  tokenText: \"getmytoken\",\r\n  setToken(token) {\r\n    localStorage.setItem(this.tokenText, this.prefix + token);\r\n  },\r\n  isTokenExpire() {\r\n    let token = this.getUser()\r\n    return !(moment(token.exp).isAfter(moment()))\r\n  },\r\n  getToken() {\r\n    var token = localStorage.getItem(this.tokenText);\r\n    if (token) {\r\n      return token.substr(this.prefix.length);\r\n    } else {\r\n      return \"\";\r\n    }\r\n\r\n  },\r\n  removeToken(){\r\n    localStorage.removeItem(this.tokenText);\r\n  },\r\n  getUser() {\r\n    return this.decodeToken(this.getToken()).user;\r\n  },\r\n  isLoggedIn() {\r\n    return (this.checkLogin(this.prefix + this.getToken()))\r\n  },\r\n  checkLogin(token) {\r\n    if (this.decodeToken(token.substr(this.prefix.length))) {\r\n      return true;\r\n    }\r\n    return false;\r\n  },\r\n\r\n  decodeToken(token) {\r\n    try {\r\n      var base64Url = token.split('.')[1];\r\n      var base64 = base64Url.replace(/-/g, '+').replace(/_/g, '/');\r\n      var jsonPayload = decodeURIComponent(atob(base64).split('').map(function (c) {\r\n        return '%' + ('00' + c.charCodeAt(0).toString(16)).slice(-2);\r\n      }).join(''));\r\n\r\n      return JSON.parse(jsonPayload);\r\n    } catch (e) {\r\n      return \"\";\r\n    }\r\n  }\r\n\r\n\r\n}\r\n"]}]}