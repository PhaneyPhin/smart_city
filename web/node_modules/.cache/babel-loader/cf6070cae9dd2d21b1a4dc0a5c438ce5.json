{"remainingRequest":"C:\\Users\\Sovannarith Phan\\smart_city\\web\\node_modules\\@vue\\cli-plugin-babel\\node_modules\\babel-loader\\lib\\index.js!C:\\Users\\Sovannarith Phan\\smart_city\\web\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!C:\\Users\\Sovannarith Phan\\smart_city\\web\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\Sovannarith Phan\\smart_city\\web\\src\\views\\pages\\user-group\\UserGroup.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\Sovannarith Phan\\smart_city\\web\\src\\views\\pages\\user-group\\UserGroup.vue","mtime":1580785451842},{"path":"C:\\Users\\Sovannarith Phan\\smart_city\\web\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1579332194156},{"path":"C:\\Users\\Sovannarith Phan\\smart_city\\web\\node_modules\\@vue\\cli-plugin-babel\\node_modules\\babel-loader\\lib\\index.js","mtime":1579332188909},{"path":"C:\\Users\\Sovannarith Phan\\smart_city\\web\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1579332194156},{"path":"C:\\Users\\Sovannarith Phan\\smart_city\\web\\node_modules\\vue-loader\\lib\\index.js","mtime":1579332241739}],"contextDependencies":[],"result":["import _toConsumableArray from \"C:\\\\Users\\\\Sovannarith Phan\\\\smart_city\\\\web\\\\node_modules\\\\@babel\\\\runtime/helpers/builtin/es6/toConsumableArray\";\nimport _objectSpread from \"C:\\\\Users\\\\Sovannarith Phan\\\\smart_city\\\\web\\\\node_modules\\\\@babel\\\\runtime/helpers/builtin/es6/objectSpread\";\nimport \"regenerator-runtime/runtime\";\nimport _asyncToGenerator from \"C:\\\\Users\\\\Sovannarith Phan\\\\smart_city\\\\web\\\\node_modules\\\\@babel\\\\runtime/helpers/builtin/es6/asyncToGenerator\";\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport EditUser from '../users/EditUser';\nimport service from '@/service/service';\nimport AddUser from '../users/AddUser';\nimport ChangePassword from '../users/ChangePassword';\nimport vSelect from 'vue-select';\nimport VuePerfectScrollbar from 'vue-perfect-scrollbar';\nexport default {\n  components: {\n    'v-select': vSelect,\n    VuePerfectScrollbar: VuePerfectScrollbar\n  },\n  data: function data() {\n    return {\n      isDone: false,\n      submitted: false,\n      popupActive: false,\n      searchQuery1: \"\",\n      searchQuery2: \"\",\n      searchQuery3: \"\",\n      searchQuery4: \"\",\n      editObj: {},\n      user_groups: [],\n      roles: [],\n      title: \"Add User Group\",\n      options: [],\n      selected: [],\n      selected_device: [],\n      option_device: [],\n      option_devices: [],\n      settings: {\n        height: 200,\n        maxScrollbarLength: 3,\n        wheelSpeed: 0.30\n      }\n    };\n  },\n  computed: {\n    show_selected: function show_selected() {\n      var _this = this;\n\n      return this.selected.filter(function (item) {\n        return item.indexOf(_this.searchQuery2) > -1;\n      });\n    },\n    show_options: function show_options() {\n      var _this2 = this;\n\n      return this.options.filter(function (item) {\n        return item.indexOf(_this2.searchQuery1) > -1;\n      });\n    },\n    show_selected_device: function show_selected_device() {\n      var _this3 = this;\n\n      return this.selected_device.filter(function (item) {\n        return item.indexOf(_this3.searchQuery3) > -1;\n      });\n    },\n    show_option_devices: function show_option_devices() {\n      var _this4 = this;\n\n      return this.option_devices.filter(function (item) {\n        return item.indexOf(_this4.searchQuery3) > -1;\n      });\n    }\n  },\n  created: function () {\n    var _created = _asyncToGenerator(\n    /*#__PURE__*/\n    regeneratorRuntime.mark(function _callee() {\n      return regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              this.getData();\n\n            case 1:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee, this);\n    }));\n\n    return function created() {\n      return _created.apply(this, arguments);\n    };\n  }(),\n  methods: {\n    add: function add(index) {\n      this.selected.push(this.options.splice(index, 1)[0]);\n    },\n    remove: function remove(index) {\n      this.options.push(this.selected.splice(index, 1)[0]);\n    },\n    displayPrompt: function displayPrompt() {},\n    getData: function () {\n      var _getData = _asyncToGenerator(\n      /*#__PURE__*/\n      regeneratorRuntime.mark(function _callee2() {\n        var user_groupResponse, userResponse;\n        return regeneratorRuntime.wrap(function _callee2$(_context2) {\n          while (1) {\n            switch (_context2.prev = _context2.next) {\n              case 0:\n                _context2.prev = 0;\n                _context2.next = 3;\n                return service.postData(\"user-group/getUserGroup\", {});\n\n              case 3:\n                user_groupResponse = _context2.sent;\n                this.user_groups = user_groupResponse.data;\n                _context2.next = 7;\n                return this.$service.postData(\"users/getUserNoGroup\", {});\n\n              case 7:\n                userResponse = _context2.sent;\n                this.options = userResponse.data.map(function (item) {\n                  return item.username;\n                }); // var deivceResponse=await this.$service.postData('device/getDevice',)\n\n                _context2.next = 14;\n                break;\n\n              case 11:\n                _context2.prev = 11;\n                _context2.t0 = _context2[\"catch\"](0);\n                console.log(_context2.t0);\n\n              case 14:\n              case \"end\":\n                return _context2.stop();\n            }\n          }\n        }, _callee2, this, [[0, 11]]);\n      }));\n\n      return function getData() {\n        return _getData.apply(this, arguments);\n      };\n    }(),\n    remove_device: function remove_device(index) {\n      this.option_devices.push(this.selected_device.splice(index, 1)[0]);\n    },\n    add_device: function add_device(index) {\n      this.selected_device.push(this.option_devices.splice(index, 1)[0]);\n    },\n    edit: function () {\n      var _edit = _asyncToGenerator(\n      /*#__PURE__*/\n      regeneratorRuntime.mark(function _callee3(tr) {\n        var device, selected, deviceResponse;\n        return regeneratorRuntime.wrap(function _callee3$(_context3) {\n          while (1) {\n            switch (_context3.prev = _context3.next) {\n              case 0:\n                this.editObj = _objectSpread({}, tr);\n                this.title = 'Edit User Groupp';\n                _context3.next = 4;\n                return this.$service.postData('users/getUserOfGroup', {\n                  user_group_id: tr.user_group_id\n                });\n\n              case 4:\n                device = _context3.sent;\n\n                if (!(device.code == 1)) {\n                  _context3.next = 13;\n                  break;\n                }\n\n                selected = device.data.map(function (item) {\n                  return item.username;\n                }); //  this.options=[...this.options,...selected];\n\n                this.selected = _toConsumableArray(selected);\n                _context3.next = 10;\n                return this.$service.postData('user-group/getDeviceForUserGroup', {\n                  user_group_id: tr.user_group_id\n                });\n\n              case 10:\n                deviceResponse = _context3.sent;\n                this.option_devices = deviceResponse.device_out_groups;\n                this.selected_device = deviceResponse.device_in_groups; // this.editObj.selected= ['foo','bar']\n\n              case 13:\n                this.popupActive = true;\n\n              case 14:\n              case \"end\":\n                return _context3.stop();\n            }\n          }\n        }, _callee3, this);\n      }));\n\n      return function edit(_x) {\n        return _edit.apply(this, arguments);\n      };\n    }(),\n    delete_user_group: function delete_user_group(user_group_id) {\n      var _this5 = this;\n\n      this.$swal({\n        title: this.$t(\"Delete this user group?\"),\n        type: \"warning\",\n        showCancelButton: true,\n        icon: 'question',\n        confirmButtonColor: \"#3085d6\",\n        cancelButtonColor: \"#d33\",\n        cancelButtonText: this.$t(\"cancel\"),\n        confirmButtonText: this.$t(\"delete\"),\n        showLoaderOnConfirm: true,\n        preConfirm: function preConfirm() {\n          return service.postData(\"user-group/deleteUserGroup\", {\n            user_group_id: user_group_id\n          }).then(function (result) {\n            return result;\n          });\n        }\n      }).then(function (result) {\n        if (result.value) {\n          if (result.value.code) {\n            _this5.$swal(_this5.$t(\"data was deleted\"), \"\", \"success\").then(function (result) {\n              _this5.getData();\n            });\n          } else {\n            _this5.$swal(result.value.message, \"\", \"error\");\n          }\n        }\n      });\n    },\n    addUserGroup: function () {\n      var _addUserGroup = _asyncToGenerator(\n      /*#__PURE__*/\n      regeneratorRuntime.mark(function _callee4() {\n        var deviceResponse;\n        return regeneratorRuntime.wrap(function _callee4$(_context4) {\n          while (1) {\n            switch (_context4.prev = _context4.next) {\n              case 0:\n                this.title = \"Add User Group\";\n                this.editObj = {\n                  user_group_id: \"\",\n                  user_group_name: \"\"\n                };\n                this.selected = [];\n                _context4.next = 5;\n                return this.$service.postData('user-group/getDeviceForUserGroup', {\n                  user_group_id: \"\"\n                });\n\n              case 5:\n                deviceResponse = _context4.sent;\n                this.option_devices = deviceResponse.device_out_groups;\n                this.selected_device = deviceResponse.device_in_groups;\n                console.log(deviceResponse);\n                this.popupActive = true;\n\n              case 10:\n              case \"end\":\n                return _context4.stop();\n            }\n          }\n        }, _callee4, this);\n      }));\n\n      return function addUserGroup() {\n        return _addUserGroup.apply(this, arguments);\n      };\n    }(),\n    save: function save() {\n      var _this6 = this;\n\n      this.$validator.validateAll().then(\n      /*#__PURE__*/\n      function () {\n        var _ref = _asyncToGenerator(\n        /*#__PURE__*/\n        regeneratorRuntime.mark(function _callee5(result) {\n          var url;\n          return regeneratorRuntime.wrap(function _callee5$(_context5) {\n            while (1) {\n              switch (_context5.prev = _context5.next) {\n                case 0:\n                  if (!result) {\n                    _context5.next = 14;\n                    break;\n                  }\n\n                  url = \"\";\n\n                  if (!(_this6.editObj.user_group_id == \"\")) {\n                    _context5.next = 8;\n                    break;\n                  }\n\n                  _context5.next = 5;\n                  return _this6.$service.postData('user-group/addUserGroup', _objectSpread({}, _this6.editObj, {\n                    selected: _this6.selected,\n                    selected_device: _this6.selected_device\n                  }));\n\n                case 5:\n                  result = _context5.sent;\n                  _context5.next = 11;\n                  break;\n\n                case 8:\n                  _context5.next = 10;\n                  return _this6.$service.postData('user-group/updateUserGroup', _objectSpread({}, _this6.editObj, {\n                    selected: _this6.selected,\n                    selected_device: _this6.selected_device\n                  }));\n\n                case 10:\n                  result = _context5.sent;\n\n                case 11:\n                  if (result.code == 1) {\n                    _this6.$swal(_this6.$t('data was saved!!'), '', 'success');\n                  } else {\n                    _this6.$vs.notify({\n                      title: 'Danger',\n                      text: result.message,\n                      color: 'success'\n                    });\n                  }\n\n                  _this6.popupActive = false;\n\n                  _this6.getData();\n\n                case 14:\n                case \"end\":\n                  return _context5.stop();\n              }\n            }\n          }, _callee5, this);\n        }));\n\n        return function (_x2) {\n          return _ref.apply(this, arguments);\n        };\n      }());\n    }\n  }\n};",{"version":3,"sources":["UserGroup.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA+MA,OAAA,QAAA,MAAA,mBAAA;AACA,OAAA,OAAA,MAAA,mBAAA;AACA,OAAA,OAAA,MAAA,kBAAA;AACA,OAAA,cAAA,MAAA,yBAAA;AACA,OAAA,OAAA,MAAA,YAAA;AACA,OAAA,mBAAA,MAAA,uBAAA;AAEA,eAAA;AACA,EAAA,UAAA,EAAA;AACA,gBAAA,OADA;AAEA,IAAA,mBAAA,EAAA;AAFA,GADA;AAMA,EAAA,IANA,kBAMA;AACA,WAAA;AACA,MAAA,MAAA,EAAA,KADA;AAEA,MAAA,SAAA,EAAA,KAFA;AAGA,MAAA,WAAA,EAAA,KAHA;AAIA,MAAA,YAAA,EAAA,EAJA;AAKA,MAAA,YAAA,EAAA,EALA;AAMA,MAAA,YAAA,EAAA,EANA;AAOA,MAAA,YAAA,EAAA,EAPA;AAQA,MAAA,OAAA,EAAA,EARA;AASA,MAAA,WAAA,EAAA,EATA;AAUA,MAAA,KAAA,EAAA,EAVA;AAWA,MAAA,KAAA,EAAA,gBAXA;AAaA,MAAA,OAAA,EAAA,EAbA;AAcA,MAAA,QAAA,EAAA,EAdA;AAeA,MAAA,eAAA,EAAA,EAfA;AAgBA,MAAA,aAAA,EAAA,EAhBA;AAiBA,MAAA,cAAA,EAAA,EAjBA;AAkBA,MAAA,QAAA,EAAA;AACA,QAAA,MAAA,EAAA,GADA;AAEA,QAAA,kBAAA,EAAA,CAFA;AAGA,QAAA,UAAA,EAAA;AAHA;AAlBA,KAAA;AAwBA,GA/BA;AAgCA,EAAA,QAAA,EAAA;AACA,IAAA,aADA,2BACA;AAAA;;AACA,aAAA,KAAA,QAAA,CAAA,MAAA,CAAA,UAAA,IAAA;AAAA,eAAA,IAAA,CAAA,OAAA,CAAA,KAAA,CAAA,YAAA,IAAA,CAAA,CAAA;AAAA,OAAA,CAAA;AACA,KAHA;AAIA,IAAA,YAJA,0BAIA;AAAA;;AACA,aAAA,KAAA,OAAA,CAAA,MAAA,CAAA,UAAA,IAAA;AAAA,eAAA,IAAA,CAAA,OAAA,CAAA,MAAA,CAAA,YAAA,IAAA,CAAA,CAAA;AAAA,OAAA,CAAA;AACA,KANA;AAOA,IAAA,oBAPA,kCAOA;AAAA;;AACA,aAAA,KAAA,eAAA,CAAA,MAAA,CAAA,UAAA,IAAA;AAAA,eAAA,IAAA,CAAA,OAAA,CAAA,MAAA,CAAA,YAAA,IAAA,CAAA,CAAA;AAAA,OAAA,CAAA;AACA,KATA;AAUA,IAAA,mBAVA,iCAUA;AAAA;;AACA,aAAA,KAAA,cAAA,CAAA,MAAA,CAAA,UAAA,IAAA;AAAA,eAAA,IAAA,CAAA,OAAA,CAAA,MAAA,CAAA,YAAA,IAAA,CAAA,CAAA;AAAA,OAAA,CAAA;AACA;AAZA,GAhCA;AA+CA,EAAA,OA/CA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAgDA,mBAAA,OAAA;;AAhDA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AAAA;AAAA;AAAA;AAAA;AAmDA,EAAA,OAAA,EAAA;AACA,IAAA,GADA,eACA,KADA,EACA;AACA,WAAA,QAAA,CAAA,IAAA,CAAA,KAAA,OAAA,CAAA,MAAA,CAAA,KAAA,EAAA,CAAA,EAAA,CAAA,CAAA;AACA,KAHA;AAIA,IAAA,MAJA,kBAIA,KAJA,EAIA;AACA,WAAA,OAAA,CAAA,IAAA,CAAA,KAAA,QAAA,CAAA,MAAA,CAAA,KAAA,EAAA,CAAA,EAAA,CAAA,CAAA;AAEA,KAPA;AAQA,IAAA,aARA,2BAQA,CAEA,CAVA;AAWA,IAAA,OAXA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,uBAeA,OAAA,CAAA,QAAA,CAAA,yBAAA,EAAA,EAAA,CAfA;;AAAA;AAeA,gBAAA,kBAfA;AAgBA,qBAAA,WAAA,GAAA,kBAAA,CAAA,IAAA;AAhBA;AAAA,uBAiBA,KAAA,QAAA,CAAA,QAAA,CAAA,sBAAA,EAAA,EAAA,CAjBA;;AAAA;AAiBA,gBAAA,YAjBA;AAkBA,qBAAA,OAAA,GAAA,YAAA,CAAA,IAAA,CAAA,GAAA,CAAA,UAAA,IAAA;AAAA,yBAAA,IAAA,CAAA,QAAA;AAAA,iBAAA,CAAA,CAlBA,CAmBA;;AAnBA;AAAA;;AAAA;AAAA;AAAA;AAsBA,gBAAA,OAAA,CAAA,GAAA;;AAtBA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AAAA;AAAA;AAAA;AAAA;AAyBA,IAAA,aAzBA,yBAyBA,KAzBA,EAyBA;AACA,WAAA,cAAA,CAAA,IAAA,CAAA,KAAA,eAAA,CAAA,MAAA,CAAA,KAAA,EAAA,CAAA,EAAA,CAAA,CAAA;AACA,KA3BA;AA4BA,IAAA,UA5BA,sBA4BA,KA5BA,EA4BA;AACA,WAAA,eAAA,CAAA,IAAA,CAAA,KAAA,cAAA,CAAA,MAAA,CAAA,KAAA,EAAA,CAAA,EAAA,CAAA,CAAA;AACA,KA9BA;AA+BA,IAAA,IA/BA;AAAA;AAAA;AAAA,gDA+BA,EA/BA;AAAA;AAAA;AAAA;AAAA;AAAA;AAgCA,qBAAA,OAAA,qBAAA,EAAA;AACA,qBAAA,KAAA,GAAA,kBAAA;AAjCA;AAAA,uBAkCA,KAAA,QAAA,CAAA,QAAA,CAAA,sBAAA,EAAA;AAAA,kBAAA,aAAA,EAAA,EAAA,CAAA;AAAA,iBAAA,CAlCA;;AAAA;AAkCA,gBAAA,MAlCA;;AAAA,sBAmCA,MAAA,CAAA,IAAA,IAAA,CAnCA;AAAA;AAAA;AAAA;;AAoCA,gBAAA,QApCA,GAoCA,MAAA,CAAA,IAAA,CAAA,GAAA,CAAA,UAAA,IAAA;AAAA,yBAAA,IAAA,CAAA,QAAA;AAAA,iBAAA,CApCA,EAqCA;;AACA,qBAAA,QAAA,sBAAA,QAAA;AAtCA;AAAA,uBAuCA,KAAA,QAAA,CAAA,QAAA,CAAA,kCAAA,EAAA;AAAA,kBAAA,aAAA,EAAA,EAAA,CAAA;AAAA,iBAAA,CAvCA;;AAAA;AAuCA,gBAAA,cAvCA;AAwCA,qBAAA,cAAA,GAAA,cAAA,CAAA,iBAAA;AACA,qBAAA,eAAA,GAAA,cAAA,CAAA,gBAAA,CAzCA,CA0CA;;AA1CA;AA6CA,qBAAA,WAAA,GAAA,IAAA;;AA7CA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AAAA;AAAA;AAAA;AAAA;AA+CA,IAAA,iBA/CA,6BA+CA,aA/CA,EA+CA;AAAA;;AACA,WAAA,KAAA,CAAA;AACA,QAAA,KAAA,EAAA,KAAA,EAAA,CAAA,yBAAA,CADA;AAEA,QAAA,IAAA,EAAA,SAFA;AAGA,QAAA,gBAAA,EAAA,IAHA;AAIA,QAAA,IAAA,EAAA,UAJA;AAKA,QAAA,kBAAA,EAAA,SALA;AAMA,QAAA,iBAAA,EAAA,MANA;AAOA,QAAA,gBAAA,EAAA,KAAA,EAAA,CAAA,QAAA,CAPA;AAQA,QAAA,iBAAA,EAAA,KAAA,EAAA,CAAA,QAAA,CARA;AASA,QAAA,mBAAA,EAAA,IATA;AAUA,QAAA,UAAA,EAAA,sBAAA;AACA,iBAAA,OAAA,CACA,QADA,CACA,4BADA,EACA;AAAA,YAAA,aAAA,EAAA;AAAA,WADA,EAEA,IAFA,CAEA,UAAA,MAAA,EAAA;AACA,mBAAA,MAAA;AACA,WAJA,CAAA;AAKA;AAhBA,OAAA,EAiBA,IAjBA,CAiBA,UAAA,MAAA,EAAA;AACA,YAAA,MAAA,CAAA,KAAA,EAAA;AACA,cAAA,MAAA,CAAA,KAAA,CAAA,IAAA,EAAA;AACA,YAAA,MAAA,CAAA,KAAA,CAAA,MAAA,CAAA,EAAA,CAAA,kBAAA,CAAA,EAAA,EAAA,EAAA,SAAA,EAAA,IAAA,CAAA,UAAA,MAAA,EAAA;AACA,cAAA,MAAA,CAAA,OAAA;AACA,aAFA;AAGA,WAJA,MAIA;AACA,YAAA,MAAA,CAAA,KAAA,CAAA,MAAA,CAAA,KAAA,CAAA,OAAA,EAAA,EAAA,EAAA,OAAA;AACA;AACA;AACA,OA3BA;AA4BA,KA5EA;AA6EA,IAAA,YA7EA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AA8EA,qBAAA,KAAA,GAAA,gBAAA;AACA,qBAAA,OAAA,GAAA;AACA,kBAAA,aAAA,EAAA,EADA;AAEA,kBAAA,eAAA,EAAA;AAFA,iBAAA;AAKA,qBAAA,QAAA,GAAA,EAAA;AApFA;AAAA,uBAqFA,KAAA,QAAA,CAAA,QAAA,CAAA,kCAAA,EAAA;AAAA,kBAAA,aAAA,EAAA;AAAA,iBAAA,CArFA;;AAAA;AAqFA,gBAAA,cArFA;AAsFA,qBAAA,cAAA,GAAA,cAAA,CAAA,iBAAA;AACA,qBAAA,eAAA,GAAA,cAAA,CAAA,gBAAA;AACA,gBAAA,OAAA,CAAA,GAAA,CAAA,cAAA;AACA,qBAAA,WAAA,GAAA,IAAA;;AAzFA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AAAA;AAAA;AAAA;AAAA;AA4FA,IAAA,IA5FA,kBA4FA;AAAA;;AACA,WAAA,UAAA,CAAA,WAAA,GAAA,IAAA;AAAA;AAAA;AAAA;AAAA;AAAA,gCAAA,kBAAA,MAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,uBACA,MADA;AAAA;AAAA;AAAA;;AAEA,kBAAA,GAFA,GAEA,EAFA;;AAAA,wBAGA,MAAA,CAAA,OAAA,CAAA,aAAA,IAAA,EAHA;AAAA;AAAA;AAAA;;AAAA;AAAA,yBAIA,MAAA,CAAA,QAAA,CAAA,QAAA,CAAA,yBAAA,oBAAA,MAAA,CAAA,OAAA;AAAA,oBAAA,QAAA,EAAA,MAAA,CAAA,QAAA;AAAA,oBAAA,eAAA,EAAA,MAAA,CAAA;AAAA,qBAJA;;AAAA;AAIA,kBAAA,MAJA;AAAA;AAAA;;AAAA;AAAA;AAAA,yBAMA,MAAA,CAAA,QAAA,CAAA,QAAA,CAAA,4BAAA,oBAAA,MAAA,CAAA,OAAA;AAAA,oBAAA,QAAA,EAAA,MAAA,CAAA,QAAA;AAAA,oBAAA,eAAA,EAAA,MAAA,CAAA;AAAA,qBANA;;AAAA;AAMA,kBAAA,MANA;;AAAA;AASA,sBAAA,MAAA,CAAA,IAAA,IAAA,CAAA,EAAA;AACA,oBAAA,MAAA,CAAA,KAAA,CAAA,MAAA,CAAA,EAAA,CAAA,kBAAA,CAAA,EAAA,EAAA,EAAA,SAAA;AACA,mBAFA,MAEA;AACA,oBAAA,MAAA,CAAA,GAAA,CAAA,MAAA,CAAA;AACA,sBAAA,KAAA,EAAA,QADA;AAEA,sBAAA,IAAA,EAAA,MAAA,CAAA,OAFA;AAGA,sBAAA,KAAA,EAAA;AAHA,qBAAA;AAKA;;AACA,kBAAA,MAAA,CAAA,WAAA,GAAA,KAAA;;AACA,kBAAA,MAAA,CAAA,OAAA;;AAnBA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SAAA;;AAAA;AAAA;AAAA;AAAA;AAuBA;AApHA;AAnDA,CAAA","sourcesContent":["<template>\r\n  <vx-card>\r\n    <vs-button color=\"primary\" @click=\"addUserGroup()\">Add User Group</vs-button>\r\n    <vs-table max-items=\"10\" search pagination :data=\"user_groups\">\r\n      <template slot=\"thead\">\r\n        <vs-th colspan=\"2\">user group id</vs-th>\r\n        <vs-th>user group name</vs-th>\r\n       \r\n        <vs-th>edit</vs-th>\r\n        <vs-th>delete</vs-th>\r\n      </template>\r\n\r\n      <template slot-scope=\"{data}\">\r\n        <vs-tr :key=\"indextr\" v-for=\"(tr, indextr) in data\">\r\n          <vs-td colspan=\"2\" :data=\"tr.user_group_id\">{{ tr.user_group_id }}</vs-td>\r\n\r\n          <vs-td :data=\"tr.user_group_name\">{{ tr.user_group_name }}</vs-td>\r\n        \r\n         \r\n          <vs-td > \r\n            <feather-icon\r\n              icon=\"EditIcon\"\r\n              class=\"cursor-pointer w-6 h-6 text-warning\"\r\n              size=\"small\"\r\n              @click=\"edit(tr)\"\r\n            ></feather-icon>\r\n          </vs-td>\r\n          <vs-td>\r\n            <feather-icon\r\n              icon=\"Trash2Icon\"\r\n              class=\"cursor-pointer w-6 h-6 text-danger\"\r\n              size=\"small\"\r\n              @click=\"delete_user_group(tr.user_group_id)\"\r\n            ></feather-icon>\r\n          </vs-td>\r\n        </vs-tr>\r\n      </template>\r\n    </vs-table>\r\n    <vs-popup class=\"holamundo\" :title=\"title\" :active.sync=\"popupActive\">\r\n        \r\n        <vs-input\r\n                :warning=\"errors.has('user_group_name')\"\r\n                :warning-text=\"$t('user group name is required')\"\r\n                :label-placeholder=\"$t('user group name')\"\r\n                val-icon-warning=\"warning\"\r\n                v-validate=\"'required'\"\r\n                name=\"user_group_name\"\r\n                v-model=\"editObj.user_group_name\"\r\n                class=\"w-full mt-10\"\r\n                icon-pack=\"feather\"\r\n                icon=\"icon-user\"\r\n                icon-no-border\r\n                />\r\n        <p class=\"mt-5\">select username id </p>\r\n           <p class=\"mt-2\"> ** click in left box to inject user to group</p>\r\n           <p class=\"mt-2\"> ** click in right box to remove user from group</p>\r\n        <div class=\"vx-row\">\r\n          \r\n        <div class=\"vx-col w-1/2\">\r\n           \r\n          <div  class=\"border border-solid d-theme-border-grey-light \" style=\"height:300px\">\r\n                    <div class=\"flex items-center app-search-container border border-l-0 border-r-0 border-t-0 border-solid d-theme-border-grey-light\">\r\n\r\n                        <vs-input size=\"large\" icon-pack=\"feather\" icon=\"icon-search\" placeholder=\"Search...\" v-model=\"searchQuery1\" class=\"vs-input-no-border vs-input-no-shdow-focus no-icon-border w-full\" />\r\n                    </div>\r\n\r\n                   \r\n                    <VuePerfectScrollbar class=\"todo-content-scroll-area\" :settings=\"settings\" ref=\"data_list\">\r\n                        <transition-group class=\"todo-list\" name=\"list-enter-up\" tag=\"ul\" appear>\r\n                            <li class=\"flex justify-between border d-theme-border-grey-light border-solid\" v-for=\"(item,index) of show_options\" @click=\"add(index)\" :key=\"index\" :style=\"[{transitionDelay: (index * 0.1) + 's'},{cursor:'pointer'}]\">\r\n                               <div @click=\"displayPrompt\" class=\"px-4 py-4 list-item-component\">\r\n                                <div class=\"vx-row\">\r\n                                    <div class=\"vx-col w-full sm:w-5/6 flex sm:items-center sm:flex-row flex-col\">\r\n                                        <div class=\"flex items-center\">\r\n                                            <!-- <vs-checkbox v-model=\"isDone\" class=\"w-8 m-0 vs-checkbox-small\" @click.stop></vs-checkbox> -->\r\n                                            <h6 class=\"todo-title\" :class=\"{'line-through': isDone}\">{{item}}</h6>\r\n                                        </div>\r\n                                       \r\n                                    </div>\r\n\r\n                                </div>\r\n                              \r\n                            </div>\r\n                            </li>\r\n                        </transition-group>\r\n                    </VuePerfectScrollbar>\r\n            </div>\r\n           \r\n          \r\n        </div>\r\n         <div class=\"vx-col w-1/2\">\r\n              <div  class=\"border border-solid d-theme-border-grey-light \" style=\"height:300px\">\r\n                    <div class=\"flex items-center app-search-container border border-l-0 border-r-0 border-t-0 border-solid d-theme-border-grey-light\">\r\n\r\n                        <vs-input size=\"large\" icon-pack=\"feather\" icon=\"icon-search\" placeholder=\"Search...\" v-model=\"searchQuery2\" class=\"vs-input-no-border vs-input-no-shdow-focus no-icon-border w-full\" />\r\n                    </div>\r\n\r\n                   \r\n                    <VuePerfectScrollbar class=\"todo-content-scroll-area\" :settings=\"settings\" ref=\"data_list\">\r\n                        <transition-group class=\"todo-list\" name=\"list-enter-up\" tag=\"ul\" appear>\r\n                            <li class=\"flex justify-between border d-theme-border-grey-light border-solid\" v-for=\"(item,index) of show_selected\"  @click=\"remove(index)\" :key=\"index\" :style=\"[{transitionDelay: (index * 0.1) + 's'},{cursor:'pointer'}]\">\r\n                               <div @click=\"displayPrompt\" class=\"px-4 py-4 list-item-component\">\r\n                                <div class=\"vx-row\">\r\n                                    <div class=\"vx-col w-full sm:w-5/6 flex sm:items-center sm:flex-row flex-col\">\r\n                                        <div class=\"flex items-center\">\r\n                                            <h6 class=\"todo-title\" :class=\"{'line-through': isDone}\">{{item}}</h6>\r\n                                        </div>\r\n                                       \r\n                                    </div>\r\n\r\n                                </div>\r\n                              \r\n                            </div>\r\n                            </li>\r\n                        </transition-group>\r\n                    </VuePerfectScrollbar>\r\n            </div>\r\n            </div>\r\n            \r\n        </div>\r\n         <p class=\"mt-5\">select device group </p>\r\n           <p class=\"mt-2\"> ** click in left box to inject device group to user group</p>\r\n           <p class=\"mt-2\"> ** click in right box to remove device group from user group</p>\r\n        <div class=\"vx-row\">\r\n          \r\n        <div class=\"vx-col w-1/2\">\r\n           \r\n          <div  class=\"border border-solid d-theme-border-grey-light \" style=\"height:300px\">\r\n                    <div class=\"flex items-center app-search-container border border-l-0 border-r-0 border-t-0 border-solid d-theme-border-grey-light\">\r\n\r\n                        <vs-input size=\"large\" icon-pack=\"feather\" icon=\"icon-search\" placeholder=\"Search...\" v-model=\"searchQuery3\" class=\"vs-input-no-border vs-input-no-shdow-focus no-icon-border w-full\" />\r\n                    </div>\r\n\r\n                   \r\n                    <VuePerfectScrollbar class=\"todo-content-scroll-area\" :settings=\"settings\" ref=\"data_list\">\r\n                        <transition-group class=\"todo-list\" name=\"list-enter-up\" tag=\"ul\" appear>\r\n                            <li class=\"flex justify-between border d-theme-border-grey-light border-solid\" v-for=\"(item,index) of show_option_devices\" @click=\"add_device(index)\" :key=\"index\" :style=\"[{transitionDelay: (index * 0.1) + 's'},{cursor:'pointer'}]\">\r\n                               <div @click=\"displayPrompt\" class=\"px-4 py-4 list-item-component\">\r\n                                <div class=\"vx-row\">\r\n                                    <div class=\"vx-col w-full sm:w-5/6 flex sm:items-center sm:flex-row flex-col\">\r\n                                        <div class=\"flex items-center\">\r\n                                            <h6 class=\"todo-title\" :class=\"{'line-through': isDone}\">{{item}}</h6>\r\n                                        </div>\r\n                                       \r\n                                    </div>\r\n\r\n                                </div>\r\n                              \r\n                            </div>\r\n                            </li>\r\n                        </transition-group>\r\n                    </VuePerfectScrollbar>\r\n            </div>\r\n           \r\n          \r\n        </div>\r\n         <div class=\"vx-col w-1/2\">\r\n              <div  class=\"border border-solid d-theme-border-grey-light \" style=\"height:300px\">\r\n                    <div class=\"flex items-center app-search-container border border-l-0 border-r-0 border-t-0 border-solid d-theme-border-grey-light\">\r\n\r\n                        <vs-input size=\"large\" icon-pack=\"feather\" icon=\"icon-search\" placeholder=\"Search...\" v-model=\"searchQuery4\" class=\"vs-input-no-border vs-input-no-shdow-focus no-icon-border w-full\" />\r\n                    </div>\r\n\r\n                   \r\n                    <VuePerfectScrollbar class=\"todo-content-scroll-area\" :settings=\"settings\" ref=\"data_list\">\r\n                        <transition-group class=\"todo-list\" name=\"list-enter-up\" tag=\"ul\" appear>\r\n                            <li class=\"flex justify-between border d-theme-border-grey-light border-solid\" v-for=\"(item,index) of show_selected_device\"  @click=\"remove_device(index)\" :key=\"index\" :style=\"[{transitionDelay: (index * 0.1) + 's'},{cursor:'pointer'}]\">\r\n                               <div @click=\"displayPrompt\" class=\"px-4 py-4 list-item-component\">\r\n                                <div class=\"vx-row\">\r\n                                    <div class=\"vx-col w-full sm:w-5/6 flex sm:items-center sm:flex-row flex-col\">\r\n                                        <div class=\"flex items-center\">\r\n                                            <h6 class=\"todo-title\" :class=\"{'line-through': isDone}\">{{item}}</h6>\r\n                                        </div>\r\n                                       \r\n                                    </div>\r\n\r\n                                </div>\r\n                              \r\n                            </div>\r\n                            </li>\r\n                        </transition-group>\r\n                    </VuePerfectScrollbar>\r\n            </div>\r\n            </div>\r\n            \r\n        </div>\r\n        <div class=\"vx-col md:w-full mt-5\">\r\n         \r\n          <vs-button\r\n            class=\"right\"\r\n            color=\"danger\"\r\n            type=\"border\"\r\n            @click=\"popupActive = false\"\r\n          >{{ $t(\"cancel\") }}</vs-button>\r\n          <vs-button\r\n            ref=\"loadableButton\"\r\n            id=\"button-with-loading\"\r\n            class=\"vs-con-loading__container right\"\r\n            vslor=\"primary\"\r\n            @click=\"save()\"\r\n          >{{ $t(\"save\") }}</vs-button>\r\n        </div>\r\n      </vs-popup>\r\n  </vx-card>\r\n</template>\r\n\r\n<script>\r\nimport EditUser from '../users/EditUser';\r\nimport service from '@/service/service';\r\nimport AddUser from '../users/AddUser';\r\nimport ChangePassword from '../users/ChangePassword';\r\nimport vSelect from 'vue-select';\r\nimport VuePerfectScrollbar from 'vue-perfect-scrollbar';\r\n\r\nexport default {\r\n  components:{\r\n      'v-select':vSelect,\r\n      VuePerfectScrollbar\r\n  },\r\n  \r\n  data() {\r\n    return {\r\n      isDone:false,\r\n      submitted:false,\r\n      popupActive:false,\r\n      searchQuery1:\"\",\r\n      searchQuery2:\"\",\r\n      searchQuery3:\"\",\r\n      searchQuery4:\"\",\r\n      editObj:{},\r\n      user_groups:[],\r\n      roles:[],\r\n      title:\"Add User Group\",\r\n      \r\n      options: [],\r\n      selected:[],\r\n      selected_device:[],\r\n      option_device:[],\r\n      option_devices:[],\r\n      settings: {\r\n                height:200,\r\n                maxScrollbarLength: 3,\r\n                wheelSpeed: 0.30,\r\n            },\r\n    };\r\n  },\r\n  computed:{\r\n     show_selected(){\r\n       return this.selected.filter((item)=>item.indexOf(this.searchQuery2)>-1);\r\n     },\r\n     show_options(){\r\n       return this.options.filter((item)=>item.indexOf(this.searchQuery1)>-1);\r\n     },\r\n     show_selected_device(){\r\n       return this.selected_device.filter((item)=>item.indexOf(this.searchQuery3)>-1);\r\n     },\r\n     show_option_devices(){\r\n       return this.option_devices.filter((item)=>item.indexOf(this.searchQuery3)>-1);\r\n     },\r\n \r\n  },\r\n  async created(){\r\n     this.getData();\r\n      \r\n  },\r\n  methods:{\r\n    add(index){\r\n        this.selected.push(this.options.splice(index,1)[0]);\r\n    },\r\n    remove(index){\r\n        this.options.push(this.selected.splice(index,1)[0]);\r\n\r\n    },\r\n    displayPrompt(){\r\n\r\n    },\r\n    async getData(){\r\n         try{\r\n            \r\n            \r\n            var user_groupResponse=await service.postData(\"user-group/getUserGroup\",{});\r\n            this.user_groups=user_groupResponse.data;\r\n            var userResponse=await this.$service.postData(\"users/getUserNoGroup\",{});\r\n            this.options=userResponse.data.map((item)=>item.username);\r\n            // var deivceResponse=await this.$service.postData('device/getDevice',)\r\n           \r\n      }catch(e){\r\n          console.log(e);\r\n      }\r\n    },\r\n    remove_device(index){\r\n        this.option_devices.push(this.selected_device.splice(index,1)[0]);\r\n    },\r\n    add_device(index){\r\n        this.selected_device.push(this.option_devices.splice(index,1)[0]);\r\n    },\r\n    async edit(tr){\r\n           this.editObj = {...tr};\r\n           this.title='Edit User Groupp';\r\n           var device=await this.$service.postData('users/getUserOfGroup',{user_group_id:tr.user_group_id});\r\n            if(device.code==1){\r\n                var selected=device.data.map((item)=>item.username)\r\n                //  this.options=[...this.options,...selected];\r\n                this.selected=[...selected];\r\n                var deviceResponse=await this.$service.postData('user-group/getDeviceForUserGroup',{user_group_id:tr.user_group_id});\r\n                this.option_devices=deviceResponse.device_out_groups;\r\n                this.selected_device=deviceResponse.device_in_groups;\r\n                // this.editObj.selected= ['foo','bar']\r\n               \r\n            }\r\n           this.popupActive = true;\r\n    },\r\n    delete_user_group(user_group_id){\r\n        this.$swal({\r\n                title: this.$t(\"Delete this user group?\"),\r\n                type: \"warning\",\r\n                showCancelButton: true,\r\n                icon:'question',\r\n                confirmButtonColor: \"#3085d6\",\r\n                cancelButtonColor: \"#d33\",\r\n                cancelButtonText: this.$t(\"cancel\"),\r\n                confirmButtonText: this.$t(\"delete\"),\r\n                showLoaderOnConfirm: true,\r\n                preConfirm: () => {\r\n                return service\r\n                    .postData(\"user-group/deleteUserGroup\", { user_group_id: user_group_id })\r\n                    .then(result => {\r\n                    return result;\r\n                    });\r\n                }\r\n            }).then(result => {\r\n                if (result.value) {\r\n                if (result.value.code) {\r\n                    this.$swal(this.$t(\"data was deleted\"), \"\", \"success\").then(result => {\r\n                    this.getData();\r\n                    });\r\n                } else {\r\n                    this.$swal(result.value.message, \"\", \"error\");\r\n                }\r\n                }\r\n            });\r\n    },\r\n    async addUserGroup(){\r\n        this.title=\"Add User Group\";\r\n        this.editObj={\r\n            user_group_id:\"\",\r\n           user_group_name:\"\",\r\n           \r\n        };\r\n        this.selected=[];\r\n        var deviceResponse=await this.$service.postData('user-group/getDeviceForUserGroup',{user_group_id:\"\"});\r\n        this.option_devices=deviceResponse.device_out_groups;\r\n        this.selected_device=deviceResponse.device_in_groups;\r\n        console.log(deviceResponse);\r\n        this.popupActive=true;\r\n    },\r\n\r\n    save(){\r\n        this.$validator.validateAll().then(async result => {\r\n            if(result){\r\n                var url=\"\";\r\n                if(this.editObj.user_group_id==\"\"){\r\n                    var result=await this.$service.postData('user-group/addUserGroup',{...this.editObj,selected:this.selected,selected_device:this.selected_device});\r\n                }else{\r\n                    var result=await this.$service.postData('user-group/updateUserGroup',{...this.editObj,selected:this.selected,selected_device:this.selected_device});\r\n                }\r\n                \r\n                if(result.code==1){\r\n                        this.$swal(this.$t('data was saved!!'),'','success');\r\n                    }  else{\r\n                        this.$vs.notify({\r\n                            title:'Danger',\r\n                            text:result.message,\r\n                            color:'success'\r\n                        })\r\n                    }   \r\n                this.popupActive=false;\r\n                this.getData();\r\n            }\r\n        });\r\n       \r\n  },\r\n}\r\n}\r\n</script>\r\n\r\n<style lang=\"scss\">\r\n    .select input{\r\n           padding:0.5rem 1rem 0.5rem 3rem;\r\n           background:#10163a;\r\n       }\r\n</style>"],"sourceRoot":"src/views/pages/user-group"}]}