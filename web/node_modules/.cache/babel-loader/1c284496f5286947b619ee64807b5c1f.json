{"remainingRequest":"C:\\Users\\Sovannarith Phan\\Utility_Website\\web\\node_modules\\@vue\\cli-plugin-babel\\node_modules\\babel-loader\\lib\\index.js!C:\\Users\\Sovannarith Phan\\Utility_Website\\web\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!C:\\Users\\Sovannarith Phan\\Utility_Website\\web\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\Sovannarith Phan\\Utility_Website\\web\\src\\views\\pages\\users\\AddUser.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\Sovannarith Phan\\Utility_Website\\web\\src\\views\\pages\\users\\AddUser.vue","mtime":1579668371736},{"path":"C:\\Users\\Sovannarith Phan\\Utility_Website\\web\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1579332194156},{"path":"C:\\Users\\Sovannarith Phan\\Utility_Website\\web\\node_modules\\@vue\\cli-plugin-babel\\node_modules\\babel-loader\\lib\\index.js","mtime":1579332188909},{"path":"C:\\Users\\Sovannarith Phan\\Utility_Website\\web\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1579332194156},{"path":"C:\\Users\\Sovannarith Phan\\Utility_Website\\web\\node_modules\\vue-loader\\lib\\index.js","mtime":1579332241739}],"contextDependencies":[],"result":["import \"regenerator-runtime/runtime\";\nimport _asyncToGenerator from \"C:\\\\Users\\\\Sovannarith Phan\\\\Utility_Website\\\\web\\\\node_modules\\\\@babel\\\\runtime/helpers/builtin/es6/asyncToGenerator\";\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nexport default {\n  props: {\n    editObj: {\n      type: Object,\n      required: true\n    },\n    roles: {\n      require: true\n    }\n  },\n  data: function data() {\n    return {\n      isUserExist: false\n    };\n  },\n  methods: {\n    previewFiles: function () {\n      var _previewFiles = _asyncToGenerator(\n      /*#__PURE__*/\n      regeneratorRuntime.mark(function _callee(event) {\n        var _this = this;\n\n        var reader;\n        return regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                reader = new FileReader();\n                reader.readAsDataURL(event.target.files[0]);\n\n                reader.onload = function () {\n                  _this.editObj.icon_image = reader.result;\n                };\n\n              case 3:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee, this);\n      }));\n\n      return function previewFiles(_x) {\n        return _previewFiles.apply(this, arguments);\n      };\n    }(),\n    save: function () {\n      var _save = _asyncToGenerator(\n      /*#__PURE__*/\n      regeneratorRuntime.mark(function _callee3() {\n        var _this2 = this;\n\n        return regeneratorRuntime.wrap(function _callee3$(_context3) {\n          while (1) {\n            switch (_context3.prev = _context3.next) {\n              case 0:\n                this.$validator.validateAll().then(\n                /*#__PURE__*/\n                function () {\n                  var _ref = _asyncToGenerator(\n                  /*#__PURE__*/\n                  regeneratorRuntime.mark(function _callee2(result) {\n                    return regeneratorRuntime.wrap(function _callee2$(_context2) {\n                      while (1) {\n                        switch (_context2.prev = _context2.next) {\n                          case 0:\n                            console.log(result);\n\n                            if (!(result && !_this2.isUserExist)) {\n                              _context2.next = 9;\n                              break;\n                            }\n\n                            _context2.next = 4;\n                            return _this2.$service.postData('users/addUser', _this2.editObj);\n\n                          case 4:\n                            result = _context2.sent;\n\n                            if (result.code == 1) {\n                              _this2.$swal(_this2.$t('data was saved!!'), '', 'success');\n                            } else {\n                              _this2.$vs.notify({\n                                title: 'Danger',\n                                text: result.message,\n                                color: 'success'\n                              });\n                            }\n\n                            _this2.$emit('closepopup');\n\n                            _context2.next = 9;\n                            break;\n\n                          case 9:\n                          case \"end\":\n                            return _context2.stop();\n                        }\n                      }\n                    }, _callee2, this);\n                  }));\n\n                  return function (_x2) {\n                    return _ref.apply(this, arguments);\n                  };\n                }());\n\n              case 1:\n              case \"end\":\n                return _context3.stop();\n            }\n          }\n        }, _callee3, this);\n      }));\n\n      return function save() {\n        return _save.apply(this, arguments);\n      };\n    }()\n  },\n  mounted: function mounted() {},\n  watch: {\n    \"editObj.username\": function () {\n      var _editObjUsername = _asyncToGenerator(\n      /*#__PURE__*/\n      regeneratorRuntime.mark(function _callee4(val) {\n        var checkUserResponse;\n        return regeneratorRuntime.wrap(function _callee4$(_context4) {\n          while (1) {\n            switch (_context4.prev = _context4.next) {\n              case 0:\n                console.log(val);\n                _context4.prev = 1;\n                _context4.next = 4;\n                return this.$service.postData('users/checkUser', {\n                  username: val\n                });\n\n              case 4:\n                checkUserResponse = _context4.sent;\n                this.isUserExist = checkUserResponse.isUserExist;\n                _context4.next = 12;\n                break;\n\n              case 8:\n                _context4.prev = 8;\n                _context4.t0 = _context4[\"catch\"](1);\n                this.isUserExist = false;\n                console.log(_context4.t0);\n\n              case 12:\n              case \"end\":\n                return _context4.stop();\n            }\n          }\n        }, _callee4, this, [[1, 8]]);\n      }));\n\n      return function editObjUsername(_x3) {\n        return _editObjUsername.apply(this, arguments);\n      };\n    }()\n  }\n};",{"version":3,"sources":["AddUser.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAqKA,eAAA;AACA,EAAA,KAAA,EAAA;AACA,IAAA,OAAA,EAAA;AACA,MAAA,IAAA,EAAA,MADA;AAEA,MAAA,QAAA,EAAA;AAFA,KADA;AAKA,IAAA,KAAA,EAAA;AACA,MAAA,OAAA,EAAA;AADA;AALA,GADA;AAUA,EAAA,IAVA,kBAUA;AACA,WAAA;AACA,MAAA,WAAA,EAAA;AADA,KAAA;AAGA,GAdA;AAeA,EAAA,OAAA,EAAA;AACA,IAAA,YADA;AAAA;AAAA;AAAA,+CACA,KADA;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAEA,gBAAA,MAFA,GAEA,IAAA,UAAA,EAFA;AAGA,gBAAA,MAAA,CAAA,aAAA,CAAA,KAAA,CAAA,MAAA,CAAA,KAAA,CAAA,CAAA,CAAA;;AACA,gBAAA,MAAA,CAAA,MAAA,GAAA,YAAA;AACA,kBAAA,KAAA,CAAA,OAAA,CAAA,UAAA,GAAA,MAAA,CAAA,MAAA;AACA,iBAFA;;AAJA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AAAA;AAAA;AAAA;AAAA;AAQA,IAAA,IARA;AAAA;AAAA;AAAA;AAAA;;AAAA;AAAA;AAAA;AAAA;AASA,qBAAA,UAAA,CAAA,WAAA,GAAA,IAAA;AAAA;AAAA;AAAA;AAAA;AAAA,0CAAA,kBAAA,MAAA;AAAA;AAAA;AAAA;AAAA;AACA,4BAAA,OAAA,CAAA,GAAA,CAAA,MAAA;;AADA,kCAEA,MAAA,IAAA,CAAA,MAAA,CAAA,WAFA;AAAA;AAAA;AAAA;;AAAA;AAAA,mCAGA,MAAA,CAAA,QAAA,CAAA,QAAA,CAAA,eAAA,EAAA,MAAA,CAAA,OAAA,CAHA;;AAAA;AAGA,4BAAA,MAHA;;AAIA,gCAAA,MAAA,CAAA,IAAA,IAAA,CAAA,EAAA;AACA,8BAAA,MAAA,CAAA,KAAA,CAAA,MAAA,CAAA,EAAA,CAAA,kBAAA,CAAA,EAAA,EAAA,EAAA,SAAA;AACA,6BAFA,MAEA;AACA,8BAAA,MAAA,CAAA,GAAA,CAAA,MAAA,CAAA;AACA,gCAAA,KAAA,EAAA,QADA;AAEA,gCAAA,IAAA,EAAA,MAAA,CAAA,OAFA;AAGA,gCAAA,KAAA,EAAA;AAHA,+BAAA;AAKA;;AACA,4BAAA,MAAA,CAAA,KAAA,CAAA,YAAA;;AAbA;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,mBAAA;;AAAA;AAAA;AAAA;AAAA;;AATA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAA,GAfA;AA4CA,EAAA,OA5CA,qBA4CA,CAEA,CA9CA;AA+CA,EAAA,KAAA,EAAA;AACA,sBADA;AAAA;AAAA;AAAA,gDACA,GADA;AAAA;AAAA;AAAA;AAAA;AAAA;AAEA,gBAAA,OAAA,CAAA,GAAA,CAAA,GAAA;AAFA;AAAA;AAAA,uBAIA,KAAA,QAAA,CAAA,QAAA,CAAA,iBAAA,EAAA;AAAA,kBAAA,QAAA,EAAA;AAAA,iBAAA,CAJA;;AAAA;AAIA,gBAAA,iBAJA;AAKA,qBAAA,WAAA,GAAA,iBAAA,CAAA,WAAA;AALA;AAAA;;AAAA;AAAA;AAAA;AAOA,qBAAA,WAAA,GAAA,KAAA;AACA,gBAAA,OAAA,CAAA,GAAA;;AARA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAA;AA/CA,CAAA","sourcesContent":["<template>\r\n  <div>\r\n      <vs-input\r\n                :warning=\"errors.has('first_name')\"\r\n                :warning-text=\"$t('first name is required')\"\r\n                :label-placeholder=\"$t('first name')\"\r\n                val-icon-warning=\"warning\"\r\n                v-validate=\"'required'\"\r\n                name=\"first_name\"\r\n                v-model=\"editObj.first_name\"\r\n                class=\"w-full mt-10\"\r\n                icon-pack=\"feather\"\r\n                icon=\"icon-user\"\r\n                icon-no-border\r\n                />\r\n            <vs-input\r\n                :warning=\"errors.has('last_name')\"\r\n                :warning-text=\"$t('last name is required')\"\r\n                :label-placeholder=\"$t('last name')\"\r\n                val-icon-warning=\"warning\"\r\n                v-validate=\"'required'\"\r\n                name=\"last_name\"\r\n                v-model=\"editObj.last_name\"\r\n                class=\"w-full mt-10\"\r\n                icon-pack=\"feather\"\r\n                icon=\"icon-user\"\r\n                icon-no-border\r\n                />\r\n         <vs-input\r\n                :warning=\"errors.has('email')\"\r\n                :warning-text=\"$t(errors.first('email'))\"\r\n                :label-placeholder=\"$t('email')\"\r\n                val-icon-warning=\"warning\"\r\n                v-validate=\"'required|email'\"\r\n                name=\"email\"\r\n                v-model=\"editObj.email\"\r\n                class=\"w-full mt-10\"\r\n                icon-pack=\"feather\"\r\n                icon=\"icon-user\"\r\n                icon-no-border\r\n                />\r\n        <vs-input\r\n                :warning=\"errors.has('tel')\"\r\n                :warning-text=\"$t(errors.first('tel'))\"\r\n                :label-placeholder=\"$t('tel')\"\r\n                val-icon-warning=\"warning\"\r\n                v-validate=\"'required|numeric'\"\r\n                name=\"tel\"\r\n                v-model=\"editObj.tel\"\r\n                class=\"w-full mt-10\"\r\n                icon-pack=\"feather\"\r\n                icon=\"icon-user\"\r\n                icon-no-border\r\n                />\r\n        <vs-input\r\n                :warning=\"errors.has('username')||isUserExist\"\r\n                :warning-text=\"isUserExist?'this username is aleady exist':$t('username is required')\"\r\n                :label-placeholder=\"$t('username')\"\r\n                val-icon-warning=\"warning\"\r\n                v-validate=\"'required'\"\r\n                name=\"username\"\r\n                v-model=\"editObj.username\"\r\n                class=\"w-full mt-5\"\r\n                icon-pack=\"feather\"\r\n                icon=\"icon-user\"\r\n                icon-no-border\r\n                />\r\n            <vs-input\r\n                ref=\"password\"\r\n                :warning=\"errors.has('password')\"\r\n                :warning-text=\"$t(errors.first('password'))\"\r\n                :label-placeholder=\"$t('password')\"\r\n                val-icon-warning=\"warning\"\r\n                v-validate=\"'required|min:6|max:10'\"\r\n                name=\"password\"\r\n                v-model=\"editObj.password\"\r\n                class=\"w-full mt-10\"\r\n                icon-pack=\"feather\"\r\n                icon=\"icon-user\"\r\n                icon-no-border\r\n                type=\"password\"\r\n                />\r\n            <vs-input\r\n                :warning=\"errors.has('confirm_password')\"\r\n                :warning-text=\"$t(errors.first('confirm_password'))\"\r\n                :label-placeholder=\"$t('confirm password')\"\r\n                val-icon-warning=\"warning\"\r\n                v-validate=\"'required|min:6|max:10|confirmed:password'\"\r\n                name=\"confirm_password\"\r\n                v-model=\"editObj.confirm_password\"\r\n                class=\"w-full mt-10\"\r\n                icon-pack=\"feather\"\r\n                icon=\"icon-user\"\r\n                icon-no-border\r\n                type=\"password\"\r\n                />\r\n            <label class=\"mt-10\">{{$t('role')}}</label>\r\n            <vs-select \r\n                :warning=\"errors.has('role_id')\"\r\n                :warning-text=\"$t('role is required')\"\r\n                val-icon-warning=\"warning\"\r\n                v-validate=\"'required'\"\r\n                name=\"role_id\"\r\n                class=\"w-full\" v-model=\"editObj.role_id\"\r\n                >\r\n              <vs-select-item\r\n                :key=\"index\"\r\n                :value=\"item.role_id+''\"\r\n                :text=\"$t(item.role_name)\"\r\n                v-for=\"(item, index) in roles\"\r\n              />\r\n            </vs-select>\r\n    \r\n          <div class=\"vx-col md:w-full\">\r\n            <label for>{{ $t(\"profile picture\") }}</label>\r\n            <div class=\"con-upload\" v-if=\"editObj.icon_image == '' || editObj.icon_image == null\">\r\n              <!---->\r\n              <div class=\"con-img-upload\">\r\n                <div class=\"con-input-upload\">\r\n                  <input type=\"file\" @change=\"previewFiles\" ref=\"myFiles\" />\r\n                  <span class=\"text-input\">Upload Profile Picture</span>\r\n                  <span class=\"input-progress\" style=\"width: 0%;\"></span>\r\n                  <button\r\n                    disabled=\"disabled\"\r\n                    type=\"button\"\r\n                    title=\"Upload\"\r\n                    class=\"btn-upload-all vs-upload--button-upload\"\r\n                  >\r\n                    <i translate=\"translate\" class=\"material-icons notranslate\">cloud_upload</i>\r\n                  </button>\r\n                </div>\r\n              </div>\r\n            </div>\r\n            <div class=\"con-upload\" v-if=\"editObj.icon_image != '' && editObj.icon_image != null\">\r\n              <div class=\"con-img-upload\">\r\n                <div class=\"img-upload\">\r\n                  <button class=\"btn-x-file\" @click=\"editObj.icon_image=''\">\r\n                    <i translate=\"translate\" class=\"material-icons notranslate\">clear</i>\r\n                  </button>\r\n                  <button class=\"btn-upload-file\">\r\n                    <i translate=\"translate\" class=\"material-icons notranslate\">cloud_upload</i>\r\n                    <span>%</span>\r\n                  </button>\r\n                  <img :src=\"editObj.icon_image\" style=\"max-width: none; max-height: 100%;\" />\r\n                  <!---->\r\n                </div>\r\n                <div class=\"con-input-upload disabled-upload\">\r\n                  <input type=\"file\" accept=\"image/*\" disabled=\"disabled\" />\r\n                  <span class=\"text-input\">upload profile picture</span>\r\n                  <span class=\"input-progress\" style=\"width: 0%;\"></span>\r\n                  <button\r\n                    type=\"button\"\r\n                    title=\"Upload\"\r\n                    class=\"btn-upload-all vs-upload--button-upload\"\r\n                  >\r\n                    <i translate=\"translate\" class=\"material-icons notranslate\">cloud_upload</i>\r\n                  </button>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n    props:{\r\n        editObj:{\r\n            type:Object,\r\n            required:true\r\n        },\r\n        roles:{\r\n            require:true\r\n        }\r\n    },\r\n    data(){\r\n        return{\r\n            isUserExist:false\r\n        }\r\n    },\r\n    methods:{\r\n        async previewFiles(event) {\r\n            var reader = new FileReader();\r\n            reader.readAsDataURL(event.target.files[0]);\r\n            reader.onload = () => {\r\n                this.editObj.icon_image = reader.result;\r\n            };\r\n            },\r\n        async save(){\r\n            this.$validator.validateAll().then(async result => {\r\n                console.log(result);\r\n                if (result && !this.isUserExist) {\r\n                    var result=await this.$service.postData('users/addUser',this.editObj);\r\n                    if(result.code==1){\r\n                        this.$swal(this.$t('data was saved!!'),'','success');\r\n                    }  else{\r\n                        this.$vs.notify({\r\n                            title:'Danger',\r\n                            text:result.message,\r\n                            color:'success'\r\n                        })\r\n                    }   \r\n                    this.$emit('closepopup');\r\n                } else {\r\n                // form have errors\r\n                }\r\n            });\r\n        }\r\n    },\r\n    mounted(){\r\n            \r\n    },\r\n    watch:{\r\n        async \"editObj.username\"(val){\r\n            console.log(val);\r\n           try{\r\n                var checkUserResponse =await this.$service.postData('users/checkUser',{username:val});\r\n                this.isUserExist=checkUserResponse.isUserExist;\r\n           }catch(e){\r\n                this.isUserExist=false;\r\n                console.log(e);\r\n           }\r\n        }\r\n    }\r\n}\r\n</script>\r\n\r\n<style>\r\n\r\n</style>"],"sourceRoot":"src/views/pages/users"}]}