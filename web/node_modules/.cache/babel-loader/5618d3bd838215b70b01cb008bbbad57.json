{"remainingRequest":"C:\\Users\\Sovannarith Phan\\Utility_Website\\web\\node_modules\\thread-loader\\dist\\cjs.js!C:\\Users\\Sovannarith Phan\\Utility_Website\\web\\node_modules\\@vue\\cli-plugin-babel\\node_modules\\babel-loader\\lib\\index.js!C:\\Users\\Sovannarith Phan\\Utility_Website\\web\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!C:\\Users\\Sovannarith Phan\\Utility_Website\\web\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\Sovannarith Phan\\Utility_Website\\web\\src\\views\\pages\\users\\User.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\Sovannarith Phan\\Utility_Website\\web\\src\\views\\pages\\users\\User.vue","mtime":1580459282185},{"path":"C:\\Users\\Sovannarith Phan\\Utility_Website\\web\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1579332194156},{"path":"C:\\Users\\Sovannarith Phan\\Utility_Website\\web\\node_modules\\thread-loader\\dist\\cjs.js","mtime":1579332236814},{"path":"C:\\Users\\Sovannarith Phan\\Utility_Website\\web\\node_modules\\@vue\\cli-plugin-babel\\node_modules\\babel-loader\\lib\\index.js","mtime":1579332188909},{"path":"C:\\Users\\Sovannarith Phan\\Utility_Website\\web\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1579332194156},{"path":"C:\\Users\\Sovannarith Phan\\Utility_Website\\web\\node_modules\\vue-loader\\lib\\index.js","mtime":1579332241739}],"contextDependencies":[],"result":["import \"regenerator-runtime/runtime\";\nimport _asyncToGenerator from \"C:\\\\Users\\\\Sovannarith Phan\\\\Utility_Website\\\\web\\\\node_modules\\\\@babel\\\\runtime/helpers/builtin/es6/asyncToGenerator\";\nimport _defineProperty from \"C:\\\\Users\\\\Sovannarith Phan\\\\Utility_Website\\\\web\\\\node_modules\\\\@babel\\\\runtime/helpers/builtin/es6/defineProperty\";\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport EditUser from './EditUser';\nimport service from '@/service/service';\nimport AddUser from './AddUser';\nimport ChangePassword from './ChangePassword';\nexport default {\n  components: {\n    EditUser: EditUser,\n    ChangePassword: ChangePassword,\n    AddUser: AddUser\n  },\n  data: function data() {\n    return {\n      submitted: false,\n      popupActive: false,\n      editObj: {},\n      users: [],\n      src_img: \"\",\n      change_password: false,\n      roles: [],\n      addUserPopUp: false,\n      title: \"Add User\",\n      invalid: {}\n    };\n  },\n  computed: {\n    a: function a() {\n      return 1;\n    },\n    b: function b() {\n      var _this = this,\n          _ref;\n\n      var require = function require(type) {\n        return _this.submitted && _this.editObj[type] == \"\";\n      };\n\n      return _ref = {\n        first_name: require(\"first_name\"),\n        last_name: require(\"last_name\"),\n        email: require(\"email\"),\n        username: require(\"username\"),\n        role: require(\"role_id\"),\n        password: (!this.popupActive || this.change_password) && require(\"password\"),\n        confirm_password: this.submitted && this.editObj.password != this.editObj.confirm_password\n      }, _defineProperty(_ref, \"role\", require(\"role\")), _defineProperty(_ref, \"old_password\", this.change_password && require(\"old_password\")), _ref;\n    }\n  },\n  created: function () {\n    var _created = _asyncToGenerator(\n    /*#__PURE__*/\n    regeneratorRuntime.mark(function _callee() {\n      return regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              this.getData();\n\n            case 1:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee, this);\n    }));\n\n    return function created() {\n      return _created.apply(this, arguments);\n    };\n  }(),\n  methods: {\n    getData: function () {\n      var _getData = _asyncToGenerator(\n      /*#__PURE__*/\n      regeneratorRuntime.mark(function _callee2() {\n        var userResponse, roleResonse;\n        return regeneratorRuntime.wrap(function _callee2$(_context2) {\n          while (1) {\n            switch (_context2.prev = _context2.next) {\n              case 0:\n                _context2.prev = 0;\n                _context2.next = 3;\n                return service.postData(\"users/getUser\", {});\n\n              case 3:\n                userResponse = _context2.sent;\n                this.users = userResponse.data;\n                _context2.next = 7;\n                return service.postData(\"users/getRole\", {});\n\n              case 7:\n                roleResonse = _context2.sent;\n                this.roles = roleResonse.data;\n                _context2.next = 14;\n                break;\n\n              case 11:\n                _context2.prev = 11;\n                _context2.t0 = _context2[\"catch\"](0);\n                console.log(_context2.t0);\n\n              case 14:\n              case \"end\":\n                return _context2.stop();\n            }\n          }\n        }, _callee2, this, [[0, 11]]);\n      }));\n\n      return function getData() {\n        return _getData.apply(this, arguments);\n      };\n    }(),\n    previewFiles: function () {\n      var _previewFiles = _asyncToGenerator(\n      /*#__PURE__*/\n      regeneratorRuntime.mark(function _callee3(event) {\n        var _this2 = this;\n\n        var reader;\n        return regeneratorRuntime.wrap(function _callee3$(_context3) {\n          while (1) {\n            switch (_context3.prev = _context3.next) {\n              case 0:\n                reader = new FileReader();\n                reader.readAsDataURL(event.target.files[0]);\n\n                reader.onload = function () {\n                  _this2.editObj.icon_image = reader.result;\n                };\n\n              case 3:\n              case \"end\":\n                return _context3.stop();\n            }\n          }\n        }, _callee3, this);\n      }));\n\n      return function previewFiles(_x) {\n        return _previewFiles.apply(this, arguments);\n      };\n    }(),\n    closepopup: function closepopup() {\n      this.popupActive = false;\n      this.addUserPopUp = false;\n      this.getData();\n    },\n    addUser: function addUser() {\n      this.title = \"Add User\";\n      this.editObj = {\n        username: \"\",\n        email: \"\",\n        first_name: \"\",\n        last_name: \"\",\n        role_id: \"\",\n        icon_image: \"\",\n        tel: \"\",\n        admin: \"\",\n        password: \"\"\n      };\n      this.addUserPopUp = true;\n    },\n    save: function save() {\n      if (this.popupActive) {\n        if (this.change_password) {\n          this.$refs.changepassword.save();\n        } else {\n          this.$refs.editUserComponent.save();\n        }\n      } else {\n        this.$refs.addUerComponent.save();\n      }\n    }\n  }\n};",{"version":3,"sources":["User.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\r\n  <vx-card>\r\n    <vs-button color=\"primary\" @click=\"addUser()\">Add User</vs-button>\r\n    <vs-table max-items=\"10\" search pagination :data=\"users\">\r\n      <template slot=\"thead\">\r\n        <vs-th>username</vs-th>\r\n        <vs-th>email</vs-th>\r\n        <vs-th>name-surname</vs-th>\r\n        <vs-th>tel</vs-th>\r\n        <vs-th>edit</vs-th>\r\n        <vs-th>delete</vs-th>\r\n      </template>\r\n\r\n      <template slot-scope=\"{data}\">\r\n        <vs-tr :key=\"indextr\" v-for=\"(tr, indextr) in data\">\r\n          <vs-td :data=\"tr.username\">{{ tr.username }}</vs-td>\r\n\r\n          <vs-td :data=\"tr.email\">{{ tr.email }}</vs-td>\r\n          <vs-td :data=\"tr.first_name+' '+tr.last_name\">{{ tr.first_name+' '+tr.last_name }}</vs-td>\r\n\r\n          <vs-td :data=\"tr.tel\">{{ tr.tel }}</vs-td>\r\n\r\n          <vs-td>\r\n            <feather-icon\r\n              icon=\"EditIcon\"\r\n              class=\"cursor-pointer w-6 h-6 text-warning\"\r\n              size=\"small\"\r\n              @click=\"\r\n                        editObj = {...tr};\r\n                        editObj.password='';\r\n                        title='Edit User'\r\n                        popupActive = true;\r\n                      \"\r\n            ></feather-icon>\r\n          </vs-td>\r\n          <vs-td>\r\n            <feather-icon\r\n              icon=\"Trash2Icon\"\r\n              class=\"cursor-pointer w-6 h-6 text-danger\"\r\n              size=\"small\"\r\n              @click=\"delete_user(tr)\"\r\n            ></feather-icon>\r\n          </vs-td>\r\n        </vs-tr>\r\n      </template>\r\n    </vs-table>\r\n    <vs-popup class=\"holamundo\" :title=\"title\" :active.sync=\"popupActive\">\r\n      <EditUser v-if=\"!change_password\" @closepopup='closepopup' ref=\"editUserComponent\" :editObj=\"editObj\" :roles=\"roles\"/>\r\n    \r\n       <ChangePassword :editObj='editObj' @closepopup='closepopup' ref=\"changepassword\" v-if=\"change_password\"/>\r\n        <div class=\"vx-col md:w-full mt-5\">\r\n          <vs-button color=\"primary\" @click=\"change_password = !change_password\">\r\n            {{\r\n            change_password ? $t(\"edit user\") : $t(\"change password\")\r\n            }}\r\n          </vs-button>\r\n          <vs-button\r\n            class=\"right\"\r\n            color=\"danger\"\r\n            type=\"border\"\r\n            @click=\"popupActive = false\"\r\n          >{{ $t(\"cancel\") }}</vs-button>\r\n          <vs-button\r\n            ref=\"loadableButton\"\r\n            id=\"button-with-loading\"\r\n            class=\"vs-con-loading__container right\"\r\n            vslor=\"primary\"\r\n            @click=\"save()\"\r\n          >{{ $t(\"save\") }}</vs-button>\r\n        </div>\r\n      </vs-popup>\r\n      <vs-popup class=\"holamundo\" :title=\"title\" :active.sync=\"addUserPopUp\">\r\n        \r\n        <AddUser ref=\"addUerComponent\" @closepopup='closepopup' :editObj=\"editObj\" :roles=\"roles\"/>\r\n        <div class=\"vx-col md:w-full mt-5\">\r\n         \r\n          <vs-button\r\n            class=\"right\"\r\n            color=\"danger\"\r\n            type=\"border\"\r\n            @click=\"addUserPopUp = false\"\r\n          >{{ $t(\"cancel\") }}</vs-button>\r\n          <vs-button\r\n            ref=\"loadableButton\"\r\n            id=\"button-with-loading\"\r\n            class=\"vs-con-loading__container right\"\r\n            vslor=\"primary\"\r\n            @click=\"save()\"\r\n          >{{ $t(\"save\") }}</vs-button>\r\n        </div>\r\n      </vs-popup>\r\n  </vx-card>\r\n</template>\r\n\r\n<script>\r\nimport EditUser from './EditUser';\r\nimport service from '@/service/service';\r\nimport AddUser from './AddUser';\r\nimport ChangePassword from './ChangePassword';\r\nexport default {\r\n  components:{\r\n      EditUser,\r\n      ChangePassword,\r\n      AddUser\r\n  },\r\n  data() {\r\n    return {\r\n      submitted:false,\r\n      popupActive:false,\r\n      editObj:{},\r\n      users: [],\r\n      src_img:\"\",\r\n      change_password:false,\r\n      roles:[],\r\n      addUserPopUp:false,\r\n      title:\"Add User\",\r\n      invalid:{\r\n\r\n      }\r\n    };\r\n  },\r\n  computed:{\r\n      a(){\r\n          return 1;\r\n      },\r\n     b() {\r\n      var require = type => this.submitted && this.editObj[type] == \"\";\r\n      return {\r\n        first_name: require(\"first_name\"),\r\n        last_name: require(\"last_name\"),\r\n        email: require(\"email\"),\r\n        username: require(\"username\"),\r\n        role:require(\"role_id\"),\r\n        password:\r\n          (!this.popupActive || this.change_password) && require(\"password\"),\r\n        confirm_password:\r\n          this.submitted &&\r\n          this.editObj.password != this.editObj.confirm_password,\r\n        role: require(\"role\"),\r\n        old_password: this.change_password && require(\"old_password\")\r\n      }\r\n    }\r\n  },\r\n  async created(){\r\n     this.getData();\r\n      \r\n  },\r\n  methods:{\r\n    async getData(){\r\n         try{\r\n            var userResponse=await service.postData(\"users/getUser\",{});\r\n            this.users=userResponse.data;\r\n            var roleResonse=await service.postData(\"users/getRole\",{});\r\n            this.roles=roleResonse.data;\r\n      }catch(e){\r\n          console.log(e);\r\n      }\r\n    },\r\n    async previewFiles(event) {\r\n      var reader = new FileReader();\r\n      reader.readAsDataURL(event.target.files[0]);\r\n      reader.onload = () => {\r\n        this.editObj.icon_image = reader.result;\r\n      };\r\n    },\r\n    closepopup(){\r\n        this.popupActive=false;\r\n        this.addUserPopUp=false;\r\n        this.getData();\r\n    }\r\n    ,\r\n    addUser(){\r\n        this.title=\"Add User\";\r\n        this.editObj={\r\n            username:\"\",\r\n            email:\"\",\r\n            first_name:\"\",\r\n            last_name:\"\",\r\n            role_id:\"\",\r\n            icon_image:\"\",\r\n            tel:\"\",\r\n            admin:\"\",\r\n            password:\"\",\r\n\r\n\r\n        }\r\n        this.addUserPopUp=true;\r\n    },\r\n    save(){\r\n       if(this.popupActive){\r\n           if(this.change_password){\r\n               this.$refs.changepassword.save();\r\n           }else{\r\n               this.$refs.editUserComponent.save();\r\n           }\r\n       }else{\r\n           this.$refs.addUerComponent.save();\r\n\r\n       }\r\n  },\r\n}\r\n}\r\n</script>\r\n\r\n<style>\r\n</style>"],"sourceRoot":"src/views/pages/users"}]}