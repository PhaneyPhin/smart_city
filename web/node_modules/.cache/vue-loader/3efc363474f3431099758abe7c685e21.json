{"remainingRequest":"D:\\DTC PROJECT\\booking\\web\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\DTC PROJECT\\booking\\web\\src\\views\\user_booking.vue?vue&type=style&index=0&id=99905b02&lang=scss&scoped=true&","dependencies":[{"path":"D:\\DTC PROJECT\\booking\\web\\src\\views\\user_booking.vue","mtime":1575333937000},{"path":"D:\\DTC PROJECT\\booking\\web\\node_modules\\css-loader\\index.js","mtime":1567052517015},{"path":"D:\\DTC PROJECT\\booking\\web\\node_modules\\vue-loader\\lib\\loaders\\stylePostLoader.js","mtime":499162500000},{"path":"D:\\DTC PROJECT\\booking\\web\\node_modules\\postcss-loader\\lib\\index.js","mtime":499162500000},{"path":"D:\\DTC PROJECT\\booking\\web\\node_modules\\sass-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\DTC PROJECT\\booking\\web\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\DTC PROJECT\\booking\\web\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":["\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n.right{\n  float:right;\n  margin-right:10px;\n}\n.require{\n  color: red;\n}\n.value{\n  color:green;\n}\n.danger input {\n  padding: .7rem;\n  font-size: 1rem;\n  border-radius: 5px;\n  border: 1px solid red;\n  color: #626262;\n  width: 100%;\n}\n .error{\n  color:red;\n   font-size:80%;\n}\n",{"version":3,"sources":["user_booking.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAoJA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"user_booking.vue","sourceRoot":"src/views","sourcesContent":["<template >\r\n  <div class=\"vx-col w-full mb-base\" v-if=\"renderComponent\">\r\n\r\n    <!-- <edit-user :isSidebarActive=\"sideBarActive\" :operator=\"edit_operator\" @closeSidebar=\"sideBarActive = false\" /> -->\r\n\r\n    <vx-card>\r\n        <!-- <pre>{{x}}</pre> -->\r\n\r\n        <vs-table pagination max-items=\"10\" search :data=\"bookings\">\r\n\r\n                    <template slot=\"thead\">\r\n                      <vs-th sort-key=\"booking_id\">{{$t('booking_id')}}</vs-th>\r\n\r\n                      <vs-th sort-key=\"first_name+last_name\">{{$t(\"first_surname\")}}</vs-th>\r\n                      <vs-th sort-key=\"room_name\">{{$t('room_name')}}</vs-th>\r\n                      <vs-th sort-key=\"booking_description\">{{$t('booking_description')}}</vs-th>\r\n                      <vs-th sort-key=\"start_date\">{{$t('start_date')}}</vs-th>\r\n                      <vs-th sort-key=\"end_date\">{{$t('end_date')}}</vs-th>\r\n                      <vs-th>{{$t(\"view\")}}</vs-th>\r\n                      <vs-th>{{$t(\"approve\")}}</vs-th>\r\n                      <vs-th>{{$t(\"reject\")}}</vs-th>\r\n                      <vs-th>{{$t(\"delete\")}}</vs-th>\r\n                    </template>\r\n\r\n                    <template slot-scope=\"{data}\">\r\n                      <vs-tr :data=\"tr\" :key=\"index\" v-for=\"(tr, index) in data\">\r\n                        <vs-td :data=\"tr.booking_id\">\r\n                          {{ tr.booking_id}}\r\n                        </vs-td>\r\n                        <vs-td :data=\"tr.first_name+tr.last_name\" width=\"200px\">\r\n                          {{tr.first_name+' '+tr.last_name}}\r\n                        </vs-td>\r\n\r\n\r\n                        <vs-td :data=\"tr.room_name\">\r\n                          {{ tr.room_name}}\r\n                        </vs-td>\r\n                        <vs-td :data=\"tr.booking_description\">\r\n                          {{ tr.booking_description}}\r\n                        </vs-td>\r\n                        <vs-td :data=\"tr.start_date\">\r\n                          {{ tr.start_date | formatDate}}\r\n                        </vs-td>\r\n                        <vs-td :data=\"tr.end_date\">\r\n                          {{ tr.end_date | formatDate}}\r\n                        </vs-td>\r\n                        <vs-td>\r\n                          <feather-icon icon=\"MaximizeIcon\" class=\"cursor-pointer w-6 h-6 text-primary\" size=\"small\" @click=\"views(tr)\"></feather-icon>\r\n                        </vs-td>\r\n                        <vs-td>\r\n                          <feather-icon icon=\"ArrowRightCircleIcon\" class=\"cursor-pointer w-6 h-6 text-primary\" size=\"small\" @click=\"approve(tr)\"></feather-icon>\r\n                        </vs-td>\r\n                        <vs-td>\r\n                          <feather-icon icon=\"XCircleIcon\" class=\"cursor-pointer w-6 h-6 text-warning\" size=\"small\" @click=\"reject(tr)\"></feather-icon>\r\n                        </vs-td>\r\n                        <vs-td>\r\n                          <feather-icon icon=\"Trash2Icon\" class=\"cursor-pointer w-6 h-6 text-danger\" size=\"small\" @click=\"delete_booking(tr)\"></feather-icon>\r\n                        </vs-td>\r\n                      </vs-tr>\r\n                    </template>\r\n                  </vs-table>\r\n    </vx-card>\r\n    <vs-popup class=\"holamundo\" fullscreen :title=\"$t('view')\" :active.sync=\"popupActive\">\r\n            <div class=\"vx-row mt-5\">\r\n                <div class=\"vx-col md:w-1/6\" align=\"right\">\r\n                    {{$t('booking_id')}}:\r\n                </div>\r\n                <div class=\"vx-col md:w-1/6 value\">\r\n                    {{view.booking_id}}\r\n                </div>\r\n                <div class=\"vx-col md:w-1/6\" align=\"right\">\r\n                    {{$t('first_surname')}}:\r\n                </div>\r\n                <div class=\"vx-col md:w-1/6 value\">\r\n                    {{view.first_name+' '+view.last_name}}\r\n                </div>\r\n            </div>\r\n            <div class=\"vx-row mt-5\">\r\n                <div class=\"vx-col md:w-1/6\" align=\"right\">\r\n                    {{$t('room_name')}}:\r\n                </div>\r\n                <div class=\"vx-col md:w-1/6 value\">\r\n                    {{view.room_name}}\r\n                </div>\r\n                <div class=\"vx-col md:w-1/6\" align=\"right\">\r\n                    {{$t('booking_description')}}:\r\n                </div>\r\n                <div class=\"vx-col md:w-1/6 value\">\r\n                    {{view.booking_description}}\r\n                </div>\r\n            </div>\r\n            <div class=\"vx-row mt-5\">\r\n                <div class=\"vx-col md:w-1/6\" align=\"right\">\r\n                    {{$t('start_date')}}:\r\n                </div>\r\n                <div class=\"vx-col md:w-1/6 value\">\r\n                    {{view.start_date | formatDate}}\r\n                </div>\r\n                <div class=\"vx-col md:w-1/6\" align=\"right\">\r\n                    {{$t('end_date')}}:\r\n                </div>\r\n                <div class=\"vx-col md:w-1/6 value\">\r\n                    {{view.end_date | formatDate}}\r\n                </div>\r\n            </div>\r\n            <v-template v-if=\"materials.length>0\">\r\n              <div class=\"vx-row mt-5 ml-5\">\r\n              <strong>{{$t('Material Detail')}}</strong>\r\n            </div>\r\n              <vs-table pagination max-items=\"10\" search :data=\"materials\">\r\n\r\n                    <template slot=\"thead\">\r\n                      <vs-th sort-key=\"material_id\">{{$t('material_id')}}</vs-th>\r\n\r\n                      <vs-th sort-key=\"material_name\">{{$t(\"material_name\")}}</vs-th>\r\n                      <vs-th sort-key=\"material_price\">{{$t('material_price')}}</vs-th>\r\n                      <vs-th sort-key=\"number\">{{$t('material_number')}}</vs-th>\r\n                      <vs-th sort-key=\"total_price\">{{$t('total_price')}}</vs-th>\r\n                    </template>\r\n\r\n                    <template slot-scope=\"{data}\">\r\n                      <vs-tr :data=\"tr\" :key=\"index\" v-for=\"(tr, index) in data\">\r\n                        <vs-td :data=\"tr.material_id\">\r\n                          {{ tr.material_id}}\r\n                        </vs-td>\r\n                        <vs-td :data=\"tr.material_name\" width=\"200px\">\r\n                          {{tr.material_name}}\r\n                        </vs-td>\r\n\r\n\r\n                        <vs-td :data=\"tr.material_price\">\r\n                          {{ tr.material_price}}\r\n                        </vs-td>\r\n                        <vs-td :data=\"tr.number\">\r\n                          {{ tr.number}}\r\n                        </vs-td>\r\n                        <vs-td :data=\"tr.total_price\">\r\n                          {{ tr.total_price}}\r\n                        </vs-td>\r\n                      </vs-tr>\r\n                    </template>\r\n                  </vs-table>\r\n            </v-template>\r\n    </vs-popup>\r\n  </div>\r\n  <!-- <button>click</button> -->\r\n</template>\r\n<style lang=\"scss\" scoped>\r\n  .right{\r\n    float:right;\r\n    margin-right:10px;\r\n  }\r\n  .require{\r\n    color: red;\r\n  }\r\n  .value{\r\n    color:green;\r\n  }\r\n  .danger input {\r\n    padding: .7rem;\r\n    font-size: 1rem;\r\n    border-radius: 5px;\r\n    border: 1px solid red;\r\n    color: #626262;\r\n    width: 100%;\r\n  }\r\n   .error{\r\n    color:red;\r\n     font-size:80%;\r\n  }\r\n</style>\r\n\r\n\r\n<script>\r\nimport Datepicker from 'vuejs-datepicker';\r\nimport service from '@/service/service';\r\nimport EditUser from './extra-components/edit-user.vue';\r\n// import ViewData from './view/ViewData.vue';\r\nimport moment from 'moment';\r\n// import firebase from 'firebase/app'à¸§\r\n// import * as firebase from 'firebase/app';\r\n\r\n// import '@firebase/messaging';\r\nexport default {\r\n  components: {\r\n    EditUser,\r\n    Datepicker\r\n  },\r\n   data(){\r\n      return {\r\n        popupActive:false,\r\n        change_password:false,\r\n        renderComponent:true,\r\n        popupActive:false,\r\n        bookings:[],\r\n        roles:[],\r\n        view:{},\r\n        materials:[],\r\n        submitted:false,\r\n        editObj:{}\r\n      }\r\n   },\r\n\r\n   computed:{\r\n     invalid(){\r\n       var require=type=>this.submitted&&this.editObj[type]=='';\r\n       return {\r\n              room_name:require(\"room_name\"),\r\n              num_chair:require(\"num_chair\"),\r\n              num_table:require(\"num_table\")\r\n         }\r\n     },\r\n     isInvald(){\r\n        return this.invalid.room_name||this.invalid.num_chair||this.invalid.num_table\r\n      }\r\n   },\r\n   created(){\r\n      this.getdata();\r\n      this.initVal();\r\n   },\r\n   methods: {\r\n     initVal(){\r\n       this.submitted=false;\r\n       this.change_password=false;\r\n       popupActive=false,\r\n       this.editObj={\r\n          room_name:\"\",\r\n          num_chair:\"\",\r\n          num_table:\"\"\r\n        }\r\n     },\r\n    views(tr){\r\n      this.popupActive=true;\r\n      this.view=tr;\r\n      service.postData(\"/get_booked_material\",{booking_id:tr.booking_id}).then((result)=>{\r\n        this.materials=result.data;\r\n      })\r\n    },\r\n     delete_booking(booking){\r\n       this.$swal({\r\n          title:this.$t('delete_booking_title'),\r\n          text: this.$t('delete_text'),\r\n          type: 'warning',\r\n          showCancelButton: true,\r\n          confirmButtonColor: '#3085d6',\r\n          cancelButtonColor: '#d33',\r\n          cancelButtonText:this.$t('cancel'),\r\n          confirmButtonText:this.$t('confirm_delete'),\r\n          showLoaderOnConfirm: true,\r\n          preConfirm:()=>{\r\n            return  service.postData(\"/delete_booking\",{booking_id:booking.booking_id}).then((result)=>{\r\n               return result;\r\n            })\r\n\r\n          }\r\n        }).then((result) => {\r\n          if(result.value){\r\n            if(result.value.code){\r\n                this.$swal(this.$t(\"deleted_title\"),\"\",\"success\").then((result)=>{\r\n                    this.getdata();\r\n                    this.forceRerender();\r\n                    this.initVal();\r\n                });\r\n              }else{\r\n                 this.$swal(result.value.message,'','error')\r\n              }\r\n\r\n          }\r\n        })\r\n\r\n     },\r\n     reject(booking){\r\n       this.$swal({\r\n          title:this.$t('reject_booking_title'),\r\n          text: this.$t('reject_text'),\r\n          type: 'warning',\r\n          showCancelButton: true,\r\n          confirmButtonColor: '#3085d6',\r\n          cancelButtonColor: '#d33',\r\n          cancelButtonText:this.$t('cancel'),\r\n          confirmButtonText:this.$t('reject'),\r\n          showLoaderOnConfirm: true,\r\n          preConfirm:()=>{\r\n            return  service.postData(\"/reject\",{booking_id:booking.booking_id}).then((result)=>{\r\n               return result;\r\n            })\r\n\r\n          }\r\n        }).then((result) => {\r\n          if(result.value){\r\n            if(result.value.code){\r\n                this.$swal(this.$t(\"rejected_title\"),\"\",\"success\").then((result)=>{\r\n                    this.getdata();\r\n                    this.forceRerender();\r\n                    this.initVal();\r\n                });\r\n              }else{\r\n                 this.$swal(result.value.message,'','error')\r\n              }\r\n\r\n          }\r\n        })\r\n\r\n     },\r\n     approve(booking){\r\n       this.$swal({\r\n          title:this.$t('approve_booking_title'),\r\n          text: this.$t('approve_text'),\r\n          type: 'warning',\r\n          showCancelButton: true,\r\n          confirmButtonColor: '#3085d6',\r\n          cancelButtonColor: '#d33',\r\n          cancelButtonText:this.$t('cancel'),\r\n          confirmButtonText:this.$t('approve'),\r\n          showLoaderOnConfirm: true,\r\n          preConfirm:()=>{\r\n            return  service.postData(\"/approve\",{booking_id:booking.booking_id}).then((result)=>{\r\n               return result;\r\n            })\r\n\r\n          }\r\n        }).then((result) => {\r\n          if(result.value){\r\n            if(result.value.code){\r\n                this.$swal(this.$t(\"approved_title\"),\"\",\"success\").then((result)=>{\r\n                    this.getdata();\r\n                    this.forceRerender();\r\n                    this.initVal();\r\n                });\r\n              }else{\r\n                 this.$swal(result.value.message,'','error')\r\n              }\r\n\r\n          }\r\n        })\r\n\r\n     },\r\n     getdata(){\r\n\r\n       service.postData(\"/get_booking\",{\r\n\r\n          }).then((result)=>{\r\n            this.bookings=result.data;\r\n          })\r\n     },\r\n     forceRerender(){\r\n       this.renderComponent=false;\r\n       this.$nextTick(() => {\r\n          this.renderComponent = true;\r\n        });\r\n     },\r\n     save(){\r\n      this.submitted=true;\r\n       if(!this.isInvald){\r\n         if(this.popupActive){\r\n           this.$vs.loading({\r\n            background: this.backgroundLoading,\r\n            color: this.colorLoading,\r\n            container: \"#button-with-loading1\",\r\n            scale: 0.45\r\n          })\r\n\r\n         }else{\r\n           this.$vs.loading({\r\n            background: this.backgroundLoading,\r\n            color: this.colorLoading,\r\n            container: \"#button-with-loading\",\r\n            scale: 0.45\r\n          })\r\n\r\n         }\r\n\r\n       service.postData('/upsert_room',this.editObj).then((result)=>{\r\n            if(this.popupActive) this.$vs.loading.close(\"#button-with-loading1 > .con-vs-loading\")\r\n            else this.$vs.loading.close(\"#button-with-loading > .con-vs-loading\")\r\n            this.popupActive=false;\r\n            this.$swal(this.$t(\"success_title\"),\"\",\"success\").then((result)=>{\r\n\r\n\r\n              this.getdata();\r\n              this.forceRerender();\r\n\r\n           });\r\n          },err=>{\r\n             this.popupActive=false;\r\n          })\r\n       }\r\n     }\r\n    },\r\n  watch: {\r\n      popupActive (val){\r\n        if(!val){\r\n          this.editObj={\r\n          room_name:\"\",\r\n          num_chair:\"\",\r\n          num_table:\"\"\r\n        }\r\n        }\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n"]}]}