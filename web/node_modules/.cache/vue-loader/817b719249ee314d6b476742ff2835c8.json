{"remainingRequest":"C:\\Users\\Sovannarith Phan\\Utility_Website\\web\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\Sovannarith Phan\\Utility_Website\\web\\src\\views\\pages\\device-group\\DeviceGroup.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\Sovannarith Phan\\Utility_Website\\web\\src\\views\\pages\\device-group\\DeviceGroup.vue","mtime":1580781426605},{"path":"C:\\Users\\Sovannarith Phan\\Utility_Website\\web\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1579332194156},{"path":"C:\\Users\\Sovannarith Phan\\Utility_Website\\web\\node_modules\\@vue\\cli-plugin-babel\\node_modules\\babel-loader\\lib\\index.js","mtime":1579332188909},{"path":"C:\\Users\\Sovannarith Phan\\Utility_Website\\web\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1579332194156},{"path":"C:\\Users\\Sovannarith Phan\\Utility_Website\\web\\node_modules\\vue-loader\\lib\\index.js","mtime":1579332241739}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\r\nimport EditUser from '../users/EditUser';\r\nimport service from '@/service/service';\r\nimport AddUser from '../users/AddUser';\r\nimport ChangePassword from '../users/ChangePassword';\r\nimport vSelect from 'vue-select';\r\nimport VuePerfectScrollbar from 'vue-perfect-scrollbar';\r\n\r\nexport default {\r\n  components:{\r\n      'v-select':vSelect,\r\n      VuePerfectScrollbar\r\n  },\r\n  \r\n  data() {\r\n    return {\r\n      isDone:false,\r\n      submitted:false,\r\n      popupActive:false,\r\n      searchQuery1:\"\",\r\n      searchQuery2:\"\",\r\n      editObj:{},\r\n      device_groups:[],\r\n      src_img:\"\",\r\n      change_password:false,\r\n      roles:[],\r\n      addUserPopUp:false,\r\n      title:\"Add Device Group\",\r\n      \r\n      options: [],\r\n      selected:[],\r\n      settings: {\r\n                height:200,\r\n                maxScrollbarLength: 3,\r\n                wheelSpeed: 0.30,\r\n            },\r\n    };\r\n  },\r\n  computed:{\r\n     show_selected(){\r\n       return this.selected.filter((item)=>item.indexOf(this.searchQuery2)>-1);\r\n     },\r\n     show_options(){\r\n       return this.options.filter((item)=>item.indexOf(this.searchQuery1)>-1);\r\n     },\r\n     b() {\r\n      var require = type => this.submitted && this.editObj[type] == \"\";\r\n      return {\r\n        first_name: require(\"first_name\"),\r\n        last_name: require(\"last_name\"),\r\n        email: require(\"email\"),\r\n        username: require(\"username\"),\r\n        role:require(\"role_id\"),\r\n        password:\r\n          (!this.popupActive || this.change_password) && require(\"password\"),\r\n        confirm_password:\r\n          this.submitted &&\r\n          this.editObj.password != this.editObj.confirm_password,\r\n        role: require(\"role\"),\r\n        old_password: this.change_password && require(\"old_password\")\r\n      }\r\n    }\r\n  },\r\n  async created(){\r\n     this.getData();\r\n      \r\n  },\r\n  methods:{\r\n    add_device(index){\r\n    this.selected.push(this.options.splice(index,1)[0]);\r\n  },\r\n  remove(index){\r\n    this.options.push(this.selected.splice(index,1)[0]);\r\n\r\n  },\r\n    displayPrompt(){\r\n\r\n    },\r\n    async getData(){\r\n         try{\r\n            var device_groupResponse=await service.postData(\"device-group/getDeviceGroup\",{});\r\n            this.device_groups=device_groupResponse.data;\r\n            var deviceResponse=await this.$service.postData(\"device/getDeviceNoGroup\",{});\r\n            this.options=deviceResponse.data.map((item)=>item.device_id);\r\n           \r\n      }catch(e){\r\n          console.log(e);\r\n      }\r\n    },\r\n    async edit(tr){\r\n           this.editObj = {...tr};\r\n           this.title='Edit Device Group';\r\n           var device=await this.$service.postData('device/getDeviceOfGroup',{device_group_id:tr.device_group_id});\r\n            if(device.code==1){\r\n                var selected=device.data.map((item)=>item.device_id)\r\n                //  this.options=[...this.options,...selected];\r\n                this.selected=[...selected];\r\n                // this.editObj.selected= ['foo','bar']\r\n               \r\n            }\r\n           this.popupActive = true;\r\n    },\r\n    async previewFiles(event) {\r\n      var reader = new FileReader();\r\n      reader.readAsDataURL(event.target.files[0]);\r\n      reader.onload = () => {\r\n        this.editObj.device_group_icon = reader.result;\r\n      };\r\n    },\r\n    closepopup(){\r\n        this.popupActive=false;\r\n        this.addUserPopUp=false;\r\n        this.getData();\r\n    }\r\n    ,\r\n    delete_device_group(device_group_id){\r\n        this.$swal({\r\n                title: this.$t(\"Delete this device group?\"),\r\n                type: \"warning\",\r\n                showCancelButton: true,\r\n                icon:'question',\r\n                confirmButtonColor: \"#3085d6\",\r\n                cancelButtonColor: \"#d33\",\r\n                cancelButtonText: this.$t(\"cancel\"),\r\n                confirmButtonText: this.$t(\"delete\"),\r\n                showLoaderOnConfirm: true,\r\n                preConfirm: () => {\r\n                return service\r\n                    .postData(\"device-group/deleteDeviceGroup\", { device_group_id: device_group_id })\r\n                    .then(result => {\r\n                    return result;\r\n                    });\r\n                }\r\n            }).then(result => {\r\n                if (result.value) {\r\n                if (result.value.code) {\r\n                    this.$swal(this.$t(\"data was deleted\"), \"\", \"success\").then(result => {\r\n                    this.getData();\r\n                    });\r\n                } else {\r\n                    this.$swal(result.value.message, \"\", \"error\");\r\n                }\r\n                }\r\n            });\r\n    },\r\n    addDeviceGroup(){\r\n        this.title=\"Add DeviceGroup\";\r\n        this.editObj={\r\n            device_group_id:\"\",\r\n           device_group_name:\"\",\r\n           \r\n        };\r\n        this.selected=[];\r\n        this.popupActive=true;\r\n    },\r\n\r\n    save(){\r\n        this.$validator.validateAll().then(async result => {\r\n            if(result){\r\n                var url=\"\";\r\n                if(this.editObj.device_group_id==\"\"){\r\n                    var result=await this.$service.postData('device-group/addDeviceGroup',{...this.editObj,selected:this.selected});\r\n                }else{\r\n                    var result=await this.$service.postData('device-group/updateDeviceGroup',{...this.editObj,selected:this.selected});\r\n                }\r\n                \r\n                if(result.code==1){\r\n                        this.$swal(this.$t('data was saved!!'),'','success');\r\n                    }  else{\r\n                        this.$vs.notify({\r\n                            title:'Danger',\r\n                            text:result.message,\r\n                            color:'success'\r\n                        })\r\n                    }   \r\n                this.popupActive=false;\r\n                this.getData();\r\n            }\r\n        });\r\n       \r\n  },\r\n}\r\n}\r\n",{"version":3,"sources":["DeviceGroup.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAwIA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA","file":"DeviceGroup.vue","sourceRoot":"src/views/pages/device-group","sourcesContent":["<template>\r\n  <vx-card>\r\n    <vs-button color=\"primary\" @click=\"addDeviceGroup()\">Add Device Group</vs-button>\r\n    <vs-table max-items=\"10\" search pagination :data=\"device_groups\">\r\n      <template slot=\"thead\">\r\n        <vs-th colspan=\"2\">device group id</vs-th>\r\n        <vs-th>device group name</vs-th>\r\n       \r\n        <vs-th>edit</vs-th>\r\n        <vs-th>delete</vs-th>\r\n      </template>\r\n\r\n      <template slot-scope=\"{data}\">\r\n        <vs-tr :key=\"indextr\" v-for=\"(tr, indextr) in data\">\r\n          <vs-td colspan=\"2\" :data=\"tr.device_group_id\">{{ tr.device_group_id }}</vs-td>\r\n\r\n          <vs-td :data=\"tr.device_group_name\">{{ tr.device_group_name }}</vs-td>\r\n        \r\n         \r\n          <vs-td > \r\n            <feather-icon\r\n              icon=\"EditIcon\"\r\n              class=\"cursor-pointer w-6 h-6 text-warning\"\r\n              size=\"small\"\r\n              @click=\"edit(tr)\"\r\n            ></feather-icon>\r\n          </vs-td>\r\n          <vs-td>\r\n            <feather-icon\r\n              icon=\"Trash2Icon\"\r\n              class=\"cursor-pointer w-6 h-6 text-danger\"\r\n              size=\"small\"\r\n              @click=\"delete_device_group(tr.device_group_id)\"\r\n            ></feather-icon>\r\n          </vs-td>\r\n        </vs-tr>\r\n      </template>\r\n    </vs-table>\r\n    <vs-popup class=\"holamundo\" :title=\"title\" :active.sync=\"popupActive\">\r\n        \r\n        <vs-input\r\n                :warning=\"errors.has('device_group_name')\"\r\n                :warning-text=\"$t('device group name is required')\"\r\n                :label-placeholder=\"$t('device group name')\"\r\n                val-icon-warning=\"warning\"\r\n                v-validate=\"'required'\"\r\n                name=\"device_group_name\"\r\n                v-model=\"editObj.device_group_name\"\r\n                class=\"w-full mt-10\"\r\n                icon-pack=\"feather\"\r\n                icon=\"icon-user\"\r\n                icon-no-border\r\n                />\r\n        <p class=\"mt-5\">select device id </p>\r\n           <p class=\"mt-2\"> ** click in left box to inject device group</p>\r\n           <p class=\"mt-2\"> ** click in right box to remove item in group</p>\r\n        <div class=\"vx-row\">\r\n          \r\n        <div class=\"vx-col w-1/2\">\r\n           \r\n          <div  class=\"border border-solid d-theme-border-grey-light \" style=\"height:300px\">\r\n                    <div class=\"flex items-center app-search-container border border-l-0 border-r-0 border-t-0 border-solid d-theme-border-grey-light\">\r\n                        <vs-input size=\"large\" icon-pack=\"feather\" icon=\"icon-search\" placeholder=\"Search...\" v-model=\"searchQuery1\" class=\"vs-input-no-border vs-input-no-shdow-focus no-icon-border w-full\" />\r\n                    </div>\r\n                    <VuePerfectScrollbar class=\"todo-content-scroll-area\" :settings=\"settings\" ref=\"data_list\">\r\n                        <transition-group class=\"todo-list\" name=\"list-enter-up\" tag=\"ul\" appear>\r\n                            <li class=\"flex justify-between border d-theme-border-grey-light border-solid\" v-for=\"(item,index) of show_options\" @click=\"add_device(index)\" :key=\"index\" :style=\"[{transitionDelay: (index * 0.1) + 's'},{cursor:'pointer'}]\">\r\n                               <div @click=\"displayPrompt\" class=\"px-4 py-4 list-item-component\">\r\n                                <div class=\"vx-row\">\r\n                                    <div class=\"vx-col w-full sm:w-5/6 flex sm:items-center sm:flex-row flex-col\">\r\n                                        <div class=\"flex items-center\">\r\n                                            <h6 class=\"todo-title\" :class=\"{'line-through': isDone}\">{{item}}</h6>\r\n                                        </div>\r\n                                       \r\n                                    </div>\r\n\r\n                                </div>\r\n                              \r\n                            </div>\r\n                            </li>\r\n                        </transition-group>\r\n                    </VuePerfectScrollbar>\r\n            </div>\r\n           \r\n          \r\n        </div>\r\n         <div class=\"vx-col w-1/2\">\r\n              <div  class=\"border border-solid d-theme-border-grey-light \" style=\"height:300px\">\r\n                    <div class=\"flex items-center app-search-container border border-l-0 border-r-0 border-t-0 border-solid d-theme-border-grey-light\">\r\n\r\n                        <vs-input size=\"large\" icon-pack=\"feather\" icon=\"icon-search\" placeholder=\"Search...\" v-model=\"searchQuery2\" class=\"vs-input-no-border vs-input-no-shdow-focus no-icon-border w-full\" />\r\n                    </div>\r\n\r\n                   \r\n                    <VuePerfectScrollbar class=\"todo-content-scroll-area\" :settings=\"settings\" ref=\"data_list\">\r\n                        <transition-group class=\"todo-list\" name=\"list-enter-up\" tag=\"ul\" appear>\r\n                            <li class=\"flex justify-between border d-theme-border-grey-light border-solid\" v-for=\"(item,index) of show_selected\"  @click=\"remove(index)\" :key=\"index\" :style=\"[{transitionDelay: (index * 0.1) + 's'},{cursor:'pointer'}]\">\r\n                               <div @click=\"displayPrompt\" class=\"px-4 py-4 list-item-component\">\r\n                                <div class=\"vx-row\">\r\n                                    <div class=\"vx-col w-full sm:w-5/6 flex sm:items-center sm:flex-row flex-col\">\r\n                                        <div class=\"flex items-center\">\r\n                                            <h6 class=\"todo-title\" :class=\"{'line-through': isDone}\">{{item}}</h6>\r\n                                        </div>\r\n                                       \r\n                                    </div>\r\n\r\n                                </div>\r\n                              \r\n                            </div>\r\n                            </li>\r\n                        </transition-group>\r\n                    </VuePerfectScrollbar>\r\n            </div>\r\n            </div>\r\n        </div>\r\n        <div class=\"vx-col md:w-full mt-5\">\r\n         \r\n          <vs-button\r\n            class=\"right\"\r\n            color=\"danger\"\r\n            type=\"border\"\r\n            @click=\"popupActive = false\"\r\n          >{{ $t(\"cancel\") }}</vs-button>\r\n          <vs-button\r\n            ref=\"loadableButton\"\r\n            id=\"button-with-loading\"\r\n            class=\"vs-con-loading__container right\"\r\n            vslor=\"primary\"\r\n            @click=\"save()\"\r\n          >{{ $t(\"save\") }}</vs-button>\r\n        </div>\r\n      </vs-popup>\r\n  </vx-card>\r\n</template>\r\n\r\n<script>\r\nimport EditUser from '../users/EditUser';\r\nimport service from '@/service/service';\r\nimport AddUser from '../users/AddUser';\r\nimport ChangePassword from '../users/ChangePassword';\r\nimport vSelect from 'vue-select';\r\nimport VuePerfectScrollbar from 'vue-perfect-scrollbar';\r\n\r\nexport default {\r\n  components:{\r\n      'v-select':vSelect,\r\n      VuePerfectScrollbar\r\n  },\r\n  \r\n  data() {\r\n    return {\r\n      isDone:false,\r\n      submitted:false,\r\n      popupActive:false,\r\n      searchQuery1:\"\",\r\n      searchQuery2:\"\",\r\n      editObj:{},\r\n      device_groups:[],\r\n      src_img:\"\",\r\n      change_password:false,\r\n      roles:[],\r\n      addUserPopUp:false,\r\n      title:\"Add Device Group\",\r\n      \r\n      options: [],\r\n      selected:[],\r\n      settings: {\r\n                height:200,\r\n                maxScrollbarLength: 3,\r\n                wheelSpeed: 0.30,\r\n            },\r\n    };\r\n  },\r\n  computed:{\r\n     show_selected(){\r\n       return this.selected.filter((item)=>item.indexOf(this.searchQuery2)>-1);\r\n     },\r\n     show_options(){\r\n       return this.options.filter((item)=>item.indexOf(this.searchQuery1)>-1);\r\n     },\r\n     b() {\r\n      var require = type => this.submitted && this.editObj[type] == \"\";\r\n      return {\r\n        first_name: require(\"first_name\"),\r\n        last_name: require(\"last_name\"),\r\n        email: require(\"email\"),\r\n        username: require(\"username\"),\r\n        role:require(\"role_id\"),\r\n        password:\r\n          (!this.popupActive || this.change_password) && require(\"password\"),\r\n        confirm_password:\r\n          this.submitted &&\r\n          this.editObj.password != this.editObj.confirm_password,\r\n        role: require(\"role\"),\r\n        old_password: this.change_password && require(\"old_password\")\r\n      }\r\n    }\r\n  },\r\n  async created(){\r\n     this.getData();\r\n      \r\n  },\r\n  methods:{\r\n    add_device(index){\r\n    this.selected.push(this.options.splice(index,1)[0]);\r\n  },\r\n  remove(index){\r\n    this.options.push(this.selected.splice(index,1)[0]);\r\n\r\n  },\r\n    displayPrompt(){\r\n\r\n    },\r\n    async getData(){\r\n         try{\r\n            var device_groupResponse=await service.postData(\"device-group/getDeviceGroup\",{});\r\n            this.device_groups=device_groupResponse.data;\r\n            var deviceResponse=await this.$service.postData(\"device/getDeviceNoGroup\",{});\r\n            this.options=deviceResponse.data.map((item)=>item.device_id);\r\n           \r\n      }catch(e){\r\n          console.log(e);\r\n      }\r\n    },\r\n    async edit(tr){\r\n           this.editObj = {...tr};\r\n           this.title='Edit Device Group';\r\n           var device=await this.$service.postData('device/getDeviceOfGroup',{device_group_id:tr.device_group_id});\r\n            if(device.code==1){\r\n                var selected=device.data.map((item)=>item.device_id)\r\n                //  this.options=[...this.options,...selected];\r\n                this.selected=[...selected];\r\n                // this.editObj.selected= ['foo','bar']\r\n               \r\n            }\r\n           this.popupActive = true;\r\n    },\r\n    async previewFiles(event) {\r\n      var reader = new FileReader();\r\n      reader.readAsDataURL(event.target.files[0]);\r\n      reader.onload = () => {\r\n        this.editObj.device_group_icon = reader.result;\r\n      };\r\n    },\r\n    closepopup(){\r\n        this.popupActive=false;\r\n        this.addUserPopUp=false;\r\n        this.getData();\r\n    }\r\n    ,\r\n    delete_device_group(device_group_id){\r\n        this.$swal({\r\n                title: this.$t(\"Delete this device group?\"),\r\n                type: \"warning\",\r\n                showCancelButton: true,\r\n                icon:'question',\r\n                confirmButtonColor: \"#3085d6\",\r\n                cancelButtonColor: \"#d33\",\r\n                cancelButtonText: this.$t(\"cancel\"),\r\n                confirmButtonText: this.$t(\"delete\"),\r\n                showLoaderOnConfirm: true,\r\n                preConfirm: () => {\r\n                return service\r\n                    .postData(\"device-group/deleteDeviceGroup\", { device_group_id: device_group_id })\r\n                    .then(result => {\r\n                    return result;\r\n                    });\r\n                }\r\n            }).then(result => {\r\n                if (result.value) {\r\n                if (result.value.code) {\r\n                    this.$swal(this.$t(\"data was deleted\"), \"\", \"success\").then(result => {\r\n                    this.getData();\r\n                    });\r\n                } else {\r\n                    this.$swal(result.value.message, \"\", \"error\");\r\n                }\r\n                }\r\n            });\r\n    },\r\n    addDeviceGroup(){\r\n        this.title=\"Add DeviceGroup\";\r\n        this.editObj={\r\n            device_group_id:\"\",\r\n           device_group_name:\"\",\r\n           \r\n        };\r\n        this.selected=[];\r\n        this.popupActive=true;\r\n    },\r\n\r\n    save(){\r\n        this.$validator.validateAll().then(async result => {\r\n            if(result){\r\n                var url=\"\";\r\n                if(this.editObj.device_group_id==\"\"){\r\n                    var result=await this.$service.postData('device-group/addDeviceGroup',{...this.editObj,selected:this.selected});\r\n                }else{\r\n                    var result=await this.$service.postData('device-group/updateDeviceGroup',{...this.editObj,selected:this.selected});\r\n                }\r\n                \r\n                if(result.code==1){\r\n                        this.$swal(this.$t('data was saved!!'),'','success');\r\n                    }  else{\r\n                        this.$vs.notify({\r\n                            title:'Danger',\r\n                            text:result.message,\r\n                            color:'success'\r\n                        })\r\n                    }   \r\n                this.popupActive=false;\r\n                this.getData();\r\n            }\r\n        });\r\n       \r\n  },\r\n}\r\n}\r\n</script>\r\n\r\n<style lang=\"scss\">\r\n    .select input{\r\n           padding:0.5rem 1rem 0.5rem 3rem;\r\n           background:#10163a;\r\n       }\r\n</style>"]}]}