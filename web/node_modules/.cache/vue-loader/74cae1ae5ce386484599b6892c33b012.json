{"remainingRequest":"C:\\Users\\Sovannarith Phan\\Utility_Website\\web\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\Sovannarith Phan\\Utility_Website\\web\\src\\views\\pages\\users\\AddUser.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\Sovannarith Phan\\Utility_Website\\web\\src\\views\\pages\\users\\AddUser.vue","mtime":1579668371736},{"path":"C:\\Users\\Sovannarith Phan\\Utility_Website\\web\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1579332194156},{"path":"C:\\Users\\Sovannarith Phan\\Utility_Website\\web\\node_modules\\thread-loader\\dist\\cjs.js","mtime":1579332236814},{"path":"C:\\Users\\Sovannarith Phan\\Utility_Website\\web\\node_modules\\@vue\\cli-plugin-babel\\node_modules\\babel-loader\\lib\\index.js","mtime":1579332188909},{"path":"C:\\Users\\Sovannarith Phan\\Utility_Website\\web\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1579332194156},{"path":"C:\\Users\\Sovannarith Phan\\Utility_Website\\web\\node_modules\\vue-loader\\lib\\index.js","mtime":1579332241739}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\r\nexport default {\r\n    props:{\r\n        editObj:{\r\n            type:Object,\r\n            required:true\r\n        },\r\n        roles:{\r\n            require:true\r\n        }\r\n    },\r\n    data(){\r\n        return{\r\n            isUserExist:false\r\n        }\r\n    },\r\n    methods:{\r\n        async previewFiles(event) {\r\n            var reader = new FileReader();\r\n            reader.readAsDataURL(event.target.files[0]);\r\n            reader.onload = () => {\r\n                this.editObj.icon_image = reader.result;\r\n            };\r\n            },\r\n        async save(){\r\n            this.$validator.validateAll().then(async result => {\r\n                console.log(result);\r\n                if (result && !this.isUserExist) {\r\n                    var result=await this.$service.postData('users/addUser',this.editObj);\r\n                    if(result.code==1){\r\n                        this.$swal(this.$t('data was saved!!'),'','success');\r\n                    }  else{\r\n                        this.$vs.notify({\r\n                            title:'Danger',\r\n                            text:result.message,\r\n                            color:'success'\r\n                        })\r\n                    }   \r\n                    this.$emit('closepopup');\r\n                } else {\r\n                // form have errors\r\n                }\r\n            });\r\n        }\r\n    },\r\n    mounted(){\r\n            \r\n    },\r\n    watch:{\r\n        async \"editObj.username\"(val){\r\n            console.log(val);\r\n           try{\r\n                var checkUserResponse =await this.$service.postData('users/checkUser',{username:val});\r\n                this.isUserExist=checkUserResponse.isUserExist;\r\n           }catch(e){\r\n                this.isUserExist=false;\r\n                console.log(e);\r\n           }\r\n        }\r\n    }\r\n}\r\n",{"version":3,"sources":["AddUser.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAqKA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"AddUser.vue","sourceRoot":"src/views/pages/users","sourcesContent":["<template>\r\n  <div>\r\n      <vs-input\r\n                :warning=\"errors.has('first_name')\"\r\n                :warning-text=\"$t('first name is required')\"\r\n                :label-placeholder=\"$t('first name')\"\r\n                val-icon-warning=\"warning\"\r\n                v-validate=\"'required'\"\r\n                name=\"first_name\"\r\n                v-model=\"editObj.first_name\"\r\n                class=\"w-full mt-10\"\r\n                icon-pack=\"feather\"\r\n                icon=\"icon-user\"\r\n                icon-no-border\r\n                />\r\n            <vs-input\r\n                :warning=\"errors.has('last_name')\"\r\n                :warning-text=\"$t('last name is required')\"\r\n                :label-placeholder=\"$t('last name')\"\r\n                val-icon-warning=\"warning\"\r\n                v-validate=\"'required'\"\r\n                name=\"last_name\"\r\n                v-model=\"editObj.last_name\"\r\n                class=\"w-full mt-10\"\r\n                icon-pack=\"feather\"\r\n                icon=\"icon-user\"\r\n                icon-no-border\r\n                />\r\n         <vs-input\r\n                :warning=\"errors.has('email')\"\r\n                :warning-text=\"$t(errors.first('email'))\"\r\n                :label-placeholder=\"$t('email')\"\r\n                val-icon-warning=\"warning\"\r\n                v-validate=\"'required|email'\"\r\n                name=\"email\"\r\n                v-model=\"editObj.email\"\r\n                class=\"w-full mt-10\"\r\n                icon-pack=\"feather\"\r\n                icon=\"icon-user\"\r\n                icon-no-border\r\n                />\r\n        <vs-input\r\n                :warning=\"errors.has('tel')\"\r\n                :warning-text=\"$t(errors.first('tel'))\"\r\n                :label-placeholder=\"$t('tel')\"\r\n                val-icon-warning=\"warning\"\r\n                v-validate=\"'required|numeric'\"\r\n                name=\"tel\"\r\n                v-model=\"editObj.tel\"\r\n                class=\"w-full mt-10\"\r\n                icon-pack=\"feather\"\r\n                icon=\"icon-user\"\r\n                icon-no-border\r\n                />\r\n        <vs-input\r\n                :warning=\"errors.has('username')||isUserExist\"\r\n                :warning-text=\"isUserExist?'this username is aleady exist':$t('username is required')\"\r\n                :label-placeholder=\"$t('username')\"\r\n                val-icon-warning=\"warning\"\r\n                v-validate=\"'required'\"\r\n                name=\"username\"\r\n                v-model=\"editObj.username\"\r\n                class=\"w-full mt-5\"\r\n                icon-pack=\"feather\"\r\n                icon=\"icon-user\"\r\n                icon-no-border\r\n                />\r\n            <vs-input\r\n                ref=\"password\"\r\n                :warning=\"errors.has('password')\"\r\n                :warning-text=\"$t(errors.first('password'))\"\r\n                :label-placeholder=\"$t('password')\"\r\n                val-icon-warning=\"warning\"\r\n                v-validate=\"'required|min:6|max:10'\"\r\n                name=\"password\"\r\n                v-model=\"editObj.password\"\r\n                class=\"w-full mt-10\"\r\n                icon-pack=\"feather\"\r\n                icon=\"icon-user\"\r\n                icon-no-border\r\n                type=\"password\"\r\n                />\r\n            <vs-input\r\n                :warning=\"errors.has('confirm_password')\"\r\n                :warning-text=\"$t(errors.first('confirm_password'))\"\r\n                :label-placeholder=\"$t('confirm password')\"\r\n                val-icon-warning=\"warning\"\r\n                v-validate=\"'required|min:6|max:10|confirmed:password'\"\r\n                name=\"confirm_password\"\r\n                v-model=\"editObj.confirm_password\"\r\n                class=\"w-full mt-10\"\r\n                icon-pack=\"feather\"\r\n                icon=\"icon-user\"\r\n                icon-no-border\r\n                type=\"password\"\r\n                />\r\n            <label class=\"mt-10\">{{$t('role')}}</label>\r\n            <vs-select \r\n                :warning=\"errors.has('role_id')\"\r\n                :warning-text=\"$t('role is required')\"\r\n                val-icon-warning=\"warning\"\r\n                v-validate=\"'required'\"\r\n                name=\"role_id\"\r\n                class=\"w-full\" v-model=\"editObj.role_id\"\r\n                >\r\n              <vs-select-item\r\n                :key=\"index\"\r\n                :value=\"item.role_id+''\"\r\n                :text=\"$t(item.role_name)\"\r\n                v-for=\"(item, index) in roles\"\r\n              />\r\n            </vs-select>\r\n    \r\n          <div class=\"vx-col md:w-full\">\r\n            <label for>{{ $t(\"profile picture\") }}</label>\r\n            <div class=\"con-upload\" v-if=\"editObj.icon_image == '' || editObj.icon_image == null\">\r\n              <!---->\r\n              <div class=\"con-img-upload\">\r\n                <div class=\"con-input-upload\">\r\n                  <input type=\"file\" @change=\"previewFiles\" ref=\"myFiles\" />\r\n                  <span class=\"text-input\">Upload Profile Picture</span>\r\n                  <span class=\"input-progress\" style=\"width: 0%;\"></span>\r\n                  <button\r\n                    disabled=\"disabled\"\r\n                    type=\"button\"\r\n                    title=\"Upload\"\r\n                    class=\"btn-upload-all vs-upload--button-upload\"\r\n                  >\r\n                    <i translate=\"translate\" class=\"material-icons notranslate\">cloud_upload</i>\r\n                  </button>\r\n                </div>\r\n              </div>\r\n            </div>\r\n            <div class=\"con-upload\" v-if=\"editObj.icon_image != '' && editObj.icon_image != null\">\r\n              <div class=\"con-img-upload\">\r\n                <div class=\"img-upload\">\r\n                  <button class=\"btn-x-file\" @click=\"editObj.icon_image=''\">\r\n                    <i translate=\"translate\" class=\"material-icons notranslate\">clear</i>\r\n                  </button>\r\n                  <button class=\"btn-upload-file\">\r\n                    <i translate=\"translate\" class=\"material-icons notranslate\">cloud_upload</i>\r\n                    <span>%</span>\r\n                  </button>\r\n                  <img :src=\"editObj.icon_image\" style=\"max-width: none; max-height: 100%;\" />\r\n                  <!---->\r\n                </div>\r\n                <div class=\"con-input-upload disabled-upload\">\r\n                  <input type=\"file\" accept=\"image/*\" disabled=\"disabled\" />\r\n                  <span class=\"text-input\">upload profile picture</span>\r\n                  <span class=\"input-progress\" style=\"width: 0%;\"></span>\r\n                  <button\r\n                    type=\"button\"\r\n                    title=\"Upload\"\r\n                    class=\"btn-upload-all vs-upload--button-upload\"\r\n                  >\r\n                    <i translate=\"translate\" class=\"material-icons notranslate\">cloud_upload</i>\r\n                  </button>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n    props:{\r\n        editObj:{\r\n            type:Object,\r\n            required:true\r\n        },\r\n        roles:{\r\n            require:true\r\n        }\r\n    },\r\n    data(){\r\n        return{\r\n            isUserExist:false\r\n        }\r\n    },\r\n    methods:{\r\n        async previewFiles(event) {\r\n            var reader = new FileReader();\r\n            reader.readAsDataURL(event.target.files[0]);\r\n            reader.onload = () => {\r\n                this.editObj.icon_image = reader.result;\r\n            };\r\n            },\r\n        async save(){\r\n            this.$validator.validateAll().then(async result => {\r\n                console.log(result);\r\n                if (result && !this.isUserExist) {\r\n                    var result=await this.$service.postData('users/addUser',this.editObj);\r\n                    if(result.code==1){\r\n                        this.$swal(this.$t('data was saved!!'),'','success');\r\n                    }  else{\r\n                        this.$vs.notify({\r\n                            title:'Danger',\r\n                            text:result.message,\r\n                            color:'success'\r\n                        })\r\n                    }   \r\n                    this.$emit('closepopup');\r\n                } else {\r\n                // form have errors\r\n                }\r\n            });\r\n        }\r\n    },\r\n    mounted(){\r\n            \r\n    },\r\n    watch:{\r\n        async \"editObj.username\"(val){\r\n            console.log(val);\r\n           try{\r\n                var checkUserResponse =await this.$service.postData('users/checkUser',{username:val});\r\n                this.isUserExist=checkUserResponse.isUserExist;\r\n           }catch(e){\r\n                this.isUserExist=false;\r\n                console.log(e);\r\n           }\r\n        }\r\n    }\r\n}\r\n</script>\r\n\r\n<style>\r\n\r\n</style>"]}]}