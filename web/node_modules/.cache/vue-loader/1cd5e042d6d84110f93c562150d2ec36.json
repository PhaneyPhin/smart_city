{"remainingRequest":"C:\\Users\\Sovannarith Phan\\Utility_Website\\web\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\Sovannarith Phan\\Utility_Website\\web\\src\\views\\pages\\users\\User.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\Sovannarith Phan\\Utility_Website\\web\\src\\views\\pages\\users\\User.vue","mtime":1579669002045},{"path":"C:\\Users\\Sovannarith Phan\\Utility_Website\\web\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1579332194156},{"path":"C:\\Users\\Sovannarith Phan\\Utility_Website\\web\\node_modules\\thread-loader\\dist\\cjs.js","mtime":1579332236814},{"path":"C:\\Users\\Sovannarith Phan\\Utility_Website\\web\\node_modules\\@vue\\cli-plugin-babel\\node_modules\\babel-loader\\lib\\index.js","mtime":1579332188909},{"path":"C:\\Users\\Sovannarith Phan\\Utility_Website\\web\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1579332194156},{"path":"C:\\Users\\Sovannarith Phan\\Utility_Website\\web\\node_modules\\vue-loader\\lib\\index.js","mtime":1579332241739}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\r\nimport EditUser from './EditUser';\r\nimport service from '@/service/service';\r\nimport AddUser from './AddUser';\r\nimport ChangePassword from './ChangePassword';\r\nexport default {\r\n  components:{\r\n      EditUser,\r\n      ChangePassword,\r\n      AddUser\r\n  },\r\n  data() {\r\n    return {\r\n      submitted:false,\r\n      popupActive:false,\r\n      editObj:{},\r\n      users: [],\r\n      src_img:\"\",\r\n      change_password:false,\r\n      roles:[],\r\n      addUserPopUp:false,\r\n      title:\"Add User\",\r\n      invalid:{\r\n\r\n      }\r\n    };\r\n  },\r\n  computed:{\r\n      a(){\r\n          return 1;\r\n      },\r\n     b() {\r\n      var require = type => this.submitted && this.editObj[type] == \"\";\r\n      return {\r\n        first_name: require(\"first_name\"),\r\n        last_name: require(\"last_name\"),\r\n        email: require(\"email\"),\r\n        username: require(\"username\"),\r\n        role:require(\"role_id\"),\r\n        password:\r\n          (!this.popupActive || this.change_password) && require(\"password\"),\r\n        confirm_password:\r\n          this.submitted &&\r\n          this.editObj.password != this.editObj.confirm_password,\r\n        role: require(\"role\"),\r\n        old_password: this.change_password && require(\"old_password\")\r\n      }\r\n    }\r\n  },\r\n  async created(){\r\n     this.getData();\r\n      \r\n  },\r\n  methods:{\r\n    async getData(){\r\n         try{\r\n            var userResponse=await service.postData(\"users/getUser\",{});\r\n            this.users=userResponse.data;\r\n            var roleResonse=await service.postData(\"users/getRole\",{});\r\n            this.roles=roleResonse.data;\r\n      }catch(e){\r\n          console.log(e);\r\n      }\r\n    },\r\n    async previewFiles(event) {\r\n      var reader = new FileReader();\r\n      reader.readAsDataURL(event.target.files[0]);\r\n      reader.onload = () => {\r\n        this.editObj.icon_image = reader.result;\r\n      };\r\n    },\r\n    closepopup(){\r\n        this.popupActive=false;\r\n        this.addUserPopUp=false;\r\n        this.getData();\r\n    }\r\n    ,\r\n    addUser(){\r\n        this.title=\"Add User\";\r\n        this.editObj={\r\n            username:\"\",\r\n            email:\"\",\r\n            first_name:\"\",\r\n            last_name:\"\",\r\n            role_id:\"\",\r\n            icon_image:\"\",\r\n            tel:\"\",\r\n            admin:\"\",\r\n            password:\"\",\r\n\r\n\r\n        }\r\n        this.addUserPopUp=true;\r\n    },\r\n    save(){\r\n       if(this.popupActive){\r\n           if(this.change_password){\r\n               this.$refs.changepassword.save();\r\n           }else{\r\n               this.$refs.editUserComponent.save();\r\n           }\r\n       }else{\r\n           this.$refs.addUerComponent.save();\r\n\r\n       }\r\n  },\r\n}\r\n}\r\n",{"version":3,"sources":["User.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA+FA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA","file":"User.vue","sourceRoot":"src/views/pages/users","sourcesContent":["<template>\r\n  <vx-card>\r\n    <vs-button color=\"primary\" @click=\"addUser()\">Add User</vs-button>\r\n    <vs-table max-items=\"10\" search pagination :data=\"users\">\r\n      <template slot=\"thead\">\r\n        <vs-th>username</vs-th>\r\n        <vs-th>email</vs-th>\r\n        <vs-th>name-surname</vs-th>\r\n        <vs-th>tel</vs-th>\r\n        <vs-th>edit</vs-th>\r\n        <vs-th>delete</vs-th>\r\n      </template>\r\n\r\n      <template slot-scope=\"{data}\">\r\n        <vs-tr :key=\"indextr\" v-for=\"(tr, indextr) in data\">\r\n          <vs-td :data=\"tr.username\">{{ tr.username }}</vs-td>\r\n\r\n          <vs-td :data=\"tr.email\">{{ tr.email }}</vs-td>\r\n          <vs-td :data=\"tr.first_name+' '+tr.last_name\">{{ tr.first_name+' '+tr.last_name }}</vs-td>\r\n\r\n          <vs-td :data=\"tr.tel\">{{ tr.tel }}</vs-td>\r\n\r\n          <vs-td>\r\n            <feather-icon\r\n              icon=\"EditIcon\"\r\n              class=\"cursor-pointer w-6 h-6 text-warning\"\r\n              size=\"small\"\r\n              @click=\"\r\n                        editObj = {...tr};\r\n                        editObj.password='';\r\n                        title='Edit User'\r\n                        popupActive = true;\r\n                      \"\r\n            ></feather-icon>\r\n          </vs-td>\r\n          <vs-td>\r\n            <feather-icon\r\n              icon=\"Trash2Icon\"\r\n              class=\"cursor-pointer w-6 h-6 text-danger\"\r\n              size=\"small\"\r\n              @click=\"delete_user(tr)\"\r\n            ></feather-icon>\r\n          </vs-td>\r\n        </vs-tr>\r\n      </template>\r\n    </vs-table>\r\n    <vs-popup class=\"holamundo\" :title=\"title\" :active.sync=\"popupActive\">\r\n      <EditUser v-if=\"!change_password\" @closepopup='closepopup' ref=\"editUserComponent\" :editObj=\"editObj\" :roles=\"roles\"/>\r\n    \r\n       <ChangePassword :editObj='editObj' @closepopup='closepopup' ref=\"changepassword\" v-if=\"change_password\"/>\r\n        <div class=\"vx-col md:w-full mt-5\">\r\n          <vs-button color=\"primary\" @click=\"change_password = !change_password\">\r\n            {{\r\n            change_password ? $t(\"edit user\") : $t(\"change password\")\r\n            }}\r\n          </vs-button>\r\n          <vs-button\r\n            class=\"right\"\r\n            color=\"danger\"\r\n            type=\"border\"\r\n            @click=\"popupActive = false\"\r\n          >{{ $t(\"cancel\") }}</vs-button>\r\n          <vs-button\r\n            ref=\"loadableButton\"\r\n            id=\"button-with-loading\"\r\n            class=\"vs-con-loading__container right\"\r\n            vslor=\"primary\"\r\n            @click=\"save()\"\r\n          >{{ $t(\"save\") }}</vs-button>\r\n        </div>\r\n      </vs-popup>\r\n      <vs-popup class=\"holamundo\" :title=\"title\" :active.sync=\"addUserPopUp\">\r\n        \r\n        <AddUser ref=\"addUerComponent\" @closepopup='closepopup' :editObj=\"editObj\" :roles=\"roles\"/>\r\n        <div class=\"vx-col md:w-full mt-5\">\r\n         \r\n          <vs-button\r\n            class=\"right\"\r\n            color=\"danger\"\r\n            type=\"border\"\r\n            @click=\"addUserPopUp = false\"\r\n          >{{ $t(\"cancel\") }}</vs-button>\r\n          <vs-button\r\n            ref=\"loadableButton\"\r\n            id=\"button-with-loading\"\r\n            class=\"vs-con-loading__container right\"\r\n            vslor=\"primary\"\r\n            @click=\"save()\"\r\n          >{{ $t(\"save\") }}</vs-button>\r\n        </div>\r\n      </vs-popup>\r\n  </vx-card>\r\n</template>\r\n\r\n<script>\r\nimport EditUser from './EditUser';\r\nimport service from '@/service/service';\r\nimport AddUser from './AddUser';\r\nimport ChangePassword from './ChangePassword';\r\nexport default {\r\n  components:{\r\n      EditUser,\r\n      ChangePassword,\r\n      AddUser\r\n  },\r\n  data() {\r\n    return {\r\n      submitted:false,\r\n      popupActive:false,\r\n      editObj:{},\r\n      users: [],\r\n      src_img:\"\",\r\n      change_password:false,\r\n      roles:[],\r\n      addUserPopUp:false,\r\n      title:\"Add User\",\r\n      invalid:{\r\n\r\n      }\r\n    };\r\n  },\r\n  computed:{\r\n      a(){\r\n          return 1;\r\n      },\r\n     b() {\r\n      var require = type => this.submitted && this.editObj[type] == \"\";\r\n      return {\r\n        first_name: require(\"first_name\"),\r\n        last_name: require(\"last_name\"),\r\n        email: require(\"email\"),\r\n        username: require(\"username\"),\r\n        role:require(\"role_id\"),\r\n        password:\r\n          (!this.popupActive || this.change_password) && require(\"password\"),\r\n        confirm_password:\r\n          this.submitted &&\r\n          this.editObj.password != this.editObj.confirm_password,\r\n        role: require(\"role\"),\r\n        old_password: this.change_password && require(\"old_password\")\r\n      }\r\n    }\r\n  },\r\n  async created(){\r\n     this.getData();\r\n      \r\n  },\r\n  methods:{\r\n    async getData(){\r\n         try{\r\n            var userResponse=await service.postData(\"users/getUser\",{});\r\n            this.users=userResponse.data;\r\n            var roleResonse=await service.postData(\"users/getRole\",{});\r\n            this.roles=roleResonse.data;\r\n      }catch(e){\r\n          console.log(e);\r\n      }\r\n    },\r\n    async previewFiles(event) {\r\n      var reader = new FileReader();\r\n      reader.readAsDataURL(event.target.files[0]);\r\n      reader.onload = () => {\r\n        this.editObj.icon_image = reader.result;\r\n      };\r\n    },\r\n    closepopup(){\r\n        this.popupActive=false;\r\n        this.addUserPopUp=false;\r\n        this.getData();\r\n    }\r\n    ,\r\n    addUser(){\r\n        this.title=\"Add User\";\r\n        this.editObj={\r\n            username:\"\",\r\n            email:\"\",\r\n            first_name:\"\",\r\n            last_name:\"\",\r\n            role_id:\"\",\r\n            icon_image:\"\",\r\n            tel:\"\",\r\n            admin:\"\",\r\n            password:\"\",\r\n\r\n\r\n        }\r\n        this.addUserPopUp=true;\r\n    },\r\n    save(){\r\n       if(this.popupActive){\r\n           if(this.change_password){\r\n               this.$refs.changepassword.save();\r\n           }else{\r\n               this.$refs.editUserComponent.save();\r\n           }\r\n       }else{\r\n           this.$refs.addUerComponent.save();\r\n\r\n       }\r\n  },\r\n}\r\n}\r\n</script>\r\n\r\n<style>\r\n</style>"]}]}